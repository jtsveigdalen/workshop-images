function setMetaTag(n,t){if(window.analytics.utilities.getMetaTagContent(n)===undefined){var r=document.createElement("meta"),i=document.getElementsByTagName("script");r.name=n;r.content=t;i.length&&(i=i[0],i.parentNode.insertBefore(r,i))}else $("meta[name='"+n+"']").attr("content",t)}function initTracking(){setMetaTag("ms.env","prod");setMetaTag("ms.sitename","partner");setMetaTag("ms.sitesec","content_finder2");setMetaTag("ms.lang",window.location.href.match(/[a-z]{2}-[a-z]{2}/i)[0].split("-")[0]);setMetaTag("ms.loc",window.location.href.match(/[a-z]{2}-[a-z]{2}/i)[0].split("-")[1])}var AssetLib2Core,ContentFinder2;!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof exports?n(require("jquery")):n(jQuery)}(function(n,t){function r(n,t,i,r){return!(n.selector!=t.selector||n.context!=t.context||i&&i.$lqguid!=t.fn.$lqguid||r&&r.$lqguid!=t.fn2.$lqguid)}n.extend(n.fn,{livequery:function(t,u){var f,e=this;return n.each(i.queries,function(n,i){if(r(e,i,t,u))return(f=i)&&!1}),f=f||new i(e.selector,e.context,t,u),f.stopped=!1,f.run(),e},expire:function(t,u){var f=this;return n.each(i.queries,function(n,e){r(f,e,t,u)&&!f.stopped&&i.stop(e.id)}),f}});var i=n.livequery=function(t,r,u,f){var e=this;return e.selector=t,e.context=r,e.fn=u,e.fn2=f,e.elements=n([]),e.stopped=!1,e.id=i.queries.push(e)-1,u.$lqguid=u.$lqguid||i.guid++,f&&(f.$lqguid=f.$lqguid||i.guid++),e};i.prototype={stop:function(){var t=this;t.stopped||(t.fn2&&t.elements.each(t.fn2),t.elements=n([]),t.stopped=!0)},run:function(){var t=this;if(!t.stopped){var r=t.elements,i=n(t.selector,t.context),u=i.not(r),f=r.not(i);t.elements=i;u.each(t.fn);t.fn2&&f.each(t.fn2)}}};n.extend(i,{guid:0,queries:[],queue:[],running:!1,timeout:null,registered:[],checkQueue:function(){if(i.running&&i.queue.length)for(var n=i.queue.length;n--;)i.queries[i.queue.shift()].run()},pause:function(){i.running=!1},play:function(){i.running=!0;i.run()},registerPlugin:function(){n.each(arguments,function(t,r){if(n.fn[r]&&!(n.inArray(r,i.registered)>0)){var u=n.fn[r];n.fn[r]=function(){var n=u.apply(this,arguments);return i.run(),n};i.registered.push(r)}})},run:function(r){r!==t?n.inArray(r,i.queue)<0&&i.queue.push(r):n.each(i.queries,function(t){n.inArray(t,i.queue)<0&&i.queue.push(t)});i.timeout&&clearTimeout(i.timeout);i.timeout=setTimeout(i.checkQueue,20)},stop:function(r){r!==t?i.queries[r].stop():n.each(i.queries,i.prototype.stop)}});i.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html","prop","removeProp");n(function(){i.play()})}),function(n,t){"use strict";if(typeof define=="function"&&define.amd)define(["angular"],t);else if(typeof module=="object"&&module.exports){var i=angular||require("angular");i&&i.module||typeof angular=="undefined"||(i=angular);module.exports=t(i)}else t(n.angular)}(this,function(n){"use strict";var t=n.module("rzModule",[]).factory("RzSliderOptions",function(){var r={floor:0,ceil:null,step:1,precision:0,minRange:null,maxRange:null,pushRange:!1,minLimit:null,maxLimit:null,id:null,translate:null,getLegend:null,stepsArray:null,bindIndexForStepsArray:!1,draggableRange:!1,draggableRangeOnly:!1,showSelectionBar:!1,showSelectionBarEnd:!1,showSelectionBarFromValue:null,showOuterSelectionBars:!1,hidePointerLabels:!1,hideLimitLabels:!1,autoHideLimitLabels:!0,readOnly:!1,disabled:!1,interval:350,showTicks:!1,showTicksValues:!1,ticksArray:null,ticksTooltip:null,ticksValuesTooltip:null,vertical:!1,getSelectionBarColor:null,getTickColor:null,getPointerColor:null,keyboardSupport:!0,scale:1,enforceStep:!0,enforceRange:!1,noSwitching:!1,onlyBindHandles:!1,onStart:null,onChange:null,onEnd:null,rightToLeft:!1,reversedControls:!1,boundPointerLabels:!0,mergeRangeLabelsIfSame:!1,labelOverlapSeparator:" - ",customTemplateScope:null,logScale:!1,customValueToPosition:null,customPositionToValue:null,selectionBarGradient:null,ariaLabel:null,ariaLabelledBy:null,ariaLabelHigh:null,ariaLabelledByHigh:null},i={},t={};return t.options=function(t){n.extend(i,t)},t.getOptions=function(t){return n.extend({},r,i,t)},t}).factory("rzThrottle",["$timeout",function(n){return function(t,i,r){var h=Date.now||function(){return(new Date).getTime()},u,f,o,e=null,s=0,c;return r=r||{},c=function(){s=h();e=null;o=t.apply(u,f);u=f=null},function(){var l=h(),a=i-(l-s);return u=this,f=arguments,a<=0?(n.cancel(e),e=null,s=l,o=t.apply(u,f),u=f=null):e||r.trailing===!1||(e=n(c,a)),o}}}]).factory("RzSlider",["$timeout","$document","$window","$compile","RzSliderOptions","rzThrottle",function(t,i,r,u,f,e){var o=function(n,t){this.scope=n;this.lowValue=0;this.highValue=0;this.sliderElem=t;this.range=this.scope.rzSliderModel!==undefined&&this.scope.rzSliderHigh!==undefined;this.dragging={active:!1,value:0,difference:0,position:0,lowLimit:0,highLimit:0};this.positionProperty="left";this.dimensionProperty="width";this.handleHalfDim=0;this.maxPos=0;this.precision=0;this.step=1;this.tracking="";this.minValue=0;this.maxValue=0;this.valueRange=0;this.intermediateTicks=!1;this.initHasRun=!1;this.firstKeyDown=!1;this.internalChange=!1;this.cmbLabelShown=!1;this.currentFocusElement=null;this.fullBar=null;this.selBar=null;this.minH=null;this.maxH=null;this.flrLab=null;this.ceilLab=null;this.minLab=null;this.maxLab=null;this.cmbLab=null;this.ticks=null;this.init()};return o.prototype={init:function(){var i,u,t=this,f=function(){t.calcViewDimensions()};this.applyOptions();this.syncLowValue();this.range&&this.syncHighValue();this.initElemHandles();this.manageElementsStyle();this.setDisabledState();this.calcViewDimensions();this.setMinAndMax();this.addAccessibility();this.updateCeilLab();this.updateFloorLab();this.initHandles();this.manageEventsBindings();this.scope.$on("reCalcViewDimensions",f);n.element(r).on("resize",f);this.initHasRun=!0;i=e(function(){t.onLowHandleChange()},t.options.interval);u=e(function(){t.onHighHandleChange()},t.options.interval);this.scope.$on("rzSliderForceRender",function(){t.resetLabelsValue();i();t.range&&u();t.resetSlider()});this.scope.$watchCollection("rzSliderOptions()",function(n,i){n!==i&&(t.applyOptions(),t.syncLowValue(),t.range&&t.syncHighValue(),t.resetSlider())});this.scope.$watch("rzSliderModel",function(n,r){t.internalChange||n!==r&&i()});this.scope.$watch("rzSliderHigh",function(n,i){t.internalChange||n!==i&&(n!=null&&u(),(t.range&&n==null||!t.range&&n!=null)&&(t.applyOptions(),t.resetSlider()))});this.scope.$on("$destroy",function(){t.unbindEvents();n.element(r).off("resize",f);t.currentFocusElement=null})},findStepIndex:function(t){for(var i,u=0,r=0;r<this.options.stepsArray.length;r++)if(i=this.options.stepsArray[r],i===t){u=r;break}else if(n.isDate(i)){if(i.getTime()===t.getTime()){u=r;break}}else if(n.isObject(i)&&(n.isDate(i.value)&&i.value.getTime()===t.getTime()||i.value===t)){u=r;break}return u},syncLowValue:function(){this.lowValue=this.options.stepsArray?this.options.bindIndexForStepsArray?this.scope.rzSliderModel:this.findStepIndex(this.scope.rzSliderModel):this.scope.rzSliderModel},syncHighValue:function(){this.highValue=this.options.stepsArray?this.options.bindIndexForStepsArray?this.scope.rzSliderHigh:this.findStepIndex(this.scope.rzSliderHigh):this.scope.rzSliderHigh},getStepValue:function(t){var i=this.options.stepsArray[t];return n.isDate(i)?i:n.isObject(i)?i.value:i},applyLowValue:function(){this.scope.rzSliderModel=this.options.stepsArray?this.options.bindIndexForStepsArray?this.lowValue:this.getStepValue(this.lowValue):this.lowValue},applyHighValue:function(){this.scope.rzSliderHigh=this.options.stepsArray?this.options.bindIndexForStepsArray?this.highValue:this.getStepValue(this.highValue):this.highValue},onLowHandleChange:function(){this.syncLowValue();this.range&&this.syncHighValue();this.setMinAndMax();this.updateLowHandle(this.valueToPosition(this.lowValue));this.updateSelectionBar();this.updateTicksScale();this.updateAriaAttributes();this.range&&this.updateCmbLabel()},onHighHandleChange:function(){this.syncLowValue();this.syncHighValue();this.setMinAndMax();this.updateHighHandle(this.valueToPosition(this.highValue));this.updateSelectionBar();this.updateTicksScale();this.updateCmbLabel();this.updateAriaAttributes()},applyOptions:function(){var t;t=this.scope.rzSliderOptions?this.scope.rzSliderOptions():{};this.options=f.getOptions(t);this.options.step<=0&&(this.options.step=1);this.range=this.scope.rzSliderModel!==undefined&&this.scope.rzSliderHigh!==undefined;this.options.draggableRange=this.range&&this.options.draggableRange;this.options.draggableRangeOnly=this.range&&this.options.draggableRangeOnly;this.options.draggableRangeOnly&&(this.options.draggableRange=!0);this.options.showTicks=this.options.showTicks||this.options.showTicksValues||!!this.options.ticksArray;this.scope.showTicks=this.options.showTicks;(n.isNumber(this.options.showTicks)||this.options.ticksArray)&&(this.intermediateTicks=!0);this.options.showSelectionBar=this.options.showSelectionBar||this.options.showSelectionBarEnd||this.options.showSelectionBarFromValue!==null;this.options.stepsArray?this.parseStepsArray():(this.customTrFn=this.options.translate?this.options.translate:function(n){return String(n)},this.getLegend=this.options.getLegend);this.options.vertical&&(this.positionProperty="bottom",this.dimensionProperty="height");this.options.customTemplateScope&&(this.scope.custom=this.options.customTemplateScope)},parseStepsArray:function(){this.options.floor=0;this.options.ceil=this.options.stepsArray.length-1;this.options.step=1;this.customTrFn=this.options.translate?this.options.translate:function(n){return this.options.bindIndexForStepsArray?this.getStepValue(n):n};this.getLegend=function(t){var i=this.options.stepsArray[t];return n.isObject(i)?i.legend:null}},resetSlider:function(){this.manageElementsStyle();this.addAccessibility();this.setMinAndMax();this.updateCeilLab();this.updateFloorLab();this.unbindEvents();this.manageEventsBindings();this.setDisabledState();this.calcViewDimensions();this.refocusPointerIfNeeded()},refocusPointerIfNeeded:function(){if(this.currentFocusElement){this.onPointerFocus(this.currentFocusElement.pointer,this.currentFocusElement.ref);this.focusElement(this.currentFocusElement.pointer)}},initElemHandles:function(){n.forEach(this.sliderElem.children(),function(t,i){var r=n.element(t);switch(i){case 0:this.leftOutSelBar=r;break;case 1:this.rightOutSelBar=r;break;case 2:this.fullBar=r;break;case 3:this.selBar=r;break;case 4:this.minH=r;break;case 5:this.maxH=r;break;case 6:this.flrLab=r;break;case 7:this.ceilLab=r;break;case 8:this.minLab=r;break;case 9:this.maxLab=r;break;case 10:this.cmbLab=r;break;case 11:this.ticks=r}},this);this.selBar.rzsp=0;this.minH.rzsp=0;this.maxH.rzsp=0;this.flrLab.rzsp=0;this.ceilLab.rzsp=0;this.minLab.rzsp=0;this.maxLab.rzsp=0;this.cmbLab.rzsp=0},manageElementsStyle:function(){this.range?this.maxH.css("display",""):this.maxH.css("display","none");this.alwaysHide(this.flrLab,this.options.showTicksValues||this.options.hideLimitLabels);this.alwaysHide(this.ceilLab,this.options.showTicksValues||this.options.hideLimitLabels);var n=this.options.showTicksValues&&!this.intermediateTicks;this.alwaysHide(this.minLab,n||this.options.hidePointerLabels);this.alwaysHide(this.maxLab,n||!this.range||this.options.hidePointerLabels);this.alwaysHide(this.cmbLab,n||!this.range||this.options.hidePointerLabels);this.alwaysHide(this.selBar,!this.range&&!this.options.showSelectionBar);this.alwaysHide(this.leftOutSelBar,!this.range||!this.options.showOuterSelectionBars);this.alwaysHide(this.rightOutSelBar,!this.range||!this.options.showOuterSelectionBars);this.range&&this.options.showOuterSelectionBars&&this.fullBar.addClass("rz-transparent");this.options.vertical&&this.sliderElem.addClass("rz-vertical");this.options.draggableRange?this.selBar.addClass("rz-draggable"):this.selBar.removeClass("rz-draggable");this.intermediateTicks&&this.options.showTicksValues&&this.ticks.addClass("rz-ticks-values-under")},alwaysHide:function(n,t){n.rzAlwaysHide=t;t?this.hideEl(n):this.showEl(n)},manageEventsBindings:function(){this.options.disabled||this.options.readOnly?this.unbindEvents():this.bindEvents()},setDisabledState:function(){this.options.disabled?this.sliderElem.attr("disabled","disabled"):this.sliderElem.attr("disabled",null)},resetLabelsValue:function(){this.minLab.rzsv=undefined;this.maxLab.rzsv=undefined},initHandles:function(){this.updateLowHandle(this.valueToPosition(this.lowValue));this.range&&this.updateHighHandle(this.valueToPosition(this.highValue));this.updateSelectionBar();this.range&&this.updateCmbLabel();this.updateTicksScale()},translateFn:function(n,t,i,r){r=r===undefined?!0:r;var u="",f=!1,e=t.hasClass("no-label-injection");r?(this.options.stepsArray&&!this.options.bindIndexForStepsArray&&(n=this.getStepValue(n)),u=String(this.customTrFn(n,this.options.id,i))):u=String(n);(t.rzsv===undefined||t.rzsv.length!==u.length||t.rzsv.length>0&&t.rzsd===0)&&(f=!0,t.rzsv=u);e||t.html(u);this.scope[i+"Label"]=u;f&&this.getDimension(t)},setMinAndMax:function(){if(this.step=+this.options.step,this.precision=+this.options.precision,this.minValue=this.options.floor,this.options.logScale&&this.minValue===0)throw Error("Can't use floor=0 with logarithmic scale");this.options.enforceStep&&(this.lowValue=this.roundStep(this.lowValue),this.range&&(this.highValue=this.roundStep(this.highValue)));this.maxValue=this.options.ceil!=null?this.options.ceil:this.options.ceil=this.range?this.highValue:this.lowValue;this.options.enforceRange&&(this.lowValue=this.sanitizeValue(this.lowValue),this.range&&(this.highValue=this.sanitizeValue(this.highValue)));this.applyLowValue();this.range&&this.applyHighValue();this.valueRange=this.maxValue-this.minValue},addAccessibility:function(){this.minH.attr("role","slider");this.updateAriaAttributes();!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.minH.attr("tabindex",""):this.minH.attr("tabindex","0");this.options.vertical&&this.minH.attr("aria-orientation","vertical");this.options.ariaLabel?this.minH.attr("aria-label",this.options.ariaLabel):this.options.ariaLabelledBy&&this.minH.attr("aria-labelledby",this.options.ariaLabelledBy);this.range&&(this.maxH.attr("role","slider"),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.maxH.attr("tabindex",""):this.maxH.attr("tabindex","0"),this.options.vertical&&this.maxH.attr("aria-orientation","vertical"),this.options.ariaLabelHigh?this.maxH.attr("aria-label",this.options.ariaLabelHigh):this.options.ariaLabelledByHigh&&this.maxH.attr("aria-labelledby",this.options.ariaLabelledByHigh))},updateAriaAttributes:function(){this.minH.attr({"aria-valuenow":this.scope.rzSliderModel,"aria-valuetext":this.customTrFn(this.scope.rzSliderModel,this.options.id,"model"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue});this.range&&this.maxH.attr({"aria-valuenow":this.scope.rzSliderHigh,"aria-valuetext":this.customTrFn(this.scope.rzSliderHigh,this.options.id,"high"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue})},calcViewDimensions:function(){var n=this.getDimension(this.minH),i;this.handleHalfDim=n/2;this.barDimension=this.getDimension(this.fullBar);this.maxPos=this.barDimension-n;this.getDimension(this.sliderElem);this.sliderElem.rzsp=this.sliderElem[0].getBoundingClientRect()[this.positionProperty];this.initHasRun&&(this.updateFloorLab(),this.updateCeilLab(),this.initHandles(),i=this,t(function(){i.updateTicksScale()}))},updateTicksScale:function(){if(this.options.showTicks){var t=this.options.ticksArray||this.getTicksArray(),i=this.options.vertical?"translateY":"translateX",n=this;this.options.rightToLeft&&t.reverse();this.scope.ticks=t.map(function(t){var f=n.valueToPosition(t),u,r,e;return n.options.vertical&&(f=n.maxPos-f),u=i+"("+Math.round(f)+"px)",r={selected:n.isTickSelected(t),style:{"-webkit-transform":u,"-moz-transform":u,"-o-transform":u,"-ms-transform":u,transform:u}},r.selected&&n.options.getSelectionBarColor&&(r.style["background-color"]=n.getSelectionBarColor()),!r.selected&&n.options.getTickColor&&(r.style["background-color"]=n.getTickColor(t)),n.options.ticksTooltip&&(r.tooltip=n.options.ticksTooltip(t),r.tooltipPlacement=n.options.vertical?"right":"top"),(n.options.showTicksValues===!0||t%n.options.showTicksValues==0)&&(r.value=n.getDisplayValue(t,"tick-value"),n.options.ticksValuesTooltip&&(r.valueTooltip=n.options.ticksValuesTooltip(t),r.valueTooltipPlacement=n.options.vertical?"right":"top")),n.getLegend&&(e=n.getLegend(t,n.options.id),e&&(r.legend=e)),r})}},getTicksArray:function(){var t=this.step,i=[],n;for(this.intermediateTicks&&(t=this.options.showTicks),n=this.minValue;n<=this.maxValue;n+=t)i.push(n);return i},isTickSelected:function(n){if(!this.range)if(this.options.showSelectionBarFromValue!==null){var t=this.options.showSelectionBarFromValue;if(this.lowValue>t&&n>=t&&n<=this.lowValue||this.lowValue<t&&n<=t&&n>=this.lowValue)return!0}else if(this.options.showSelectionBarEnd){if(n>=this.lowValue)return!0}else if(this.options.showSelectionBar&&n<=this.lowValue)return!0;return this.range&&n>=this.lowValue&&n<=this.highValue?!0:!1},updateFloorLab:function(){this.translateFn(this.minValue,this.flrLab,"floor");this.getDimension(this.flrLab);var n=this.options.rightToLeft?this.barDimension-this.flrLab.rzsd:0;this.setPosition(this.flrLab,n)},updateCeilLab:function(){this.translateFn(this.maxValue,this.ceilLab,"ceil");this.getDimension(this.ceilLab);var n=this.options.rightToLeft?0:this.barDimension-this.ceilLab.rzsd;this.setPosition(this.ceilLab,n)},updateHandles:function(n,t){n==="lowValue"?this.updateLowHandle(t):this.updateHighHandle(t);this.updateSelectionBar();this.updateTicksScale();this.range&&this.updateCmbLabel()},getHandleLabelPos:function(n,t){var r=this[n].rzsd,i=t-r/2+this.handleHalfDim,u=this.barDimension-r;return this.options.boundPointerLabels?this.options.rightToLeft&&n==="minLab"||!this.options.rightToLeft&&n==="maxLab"?Math.min(i,u):Math.min(Math.max(i,0),u):i},updateLowHandle:function(n){if(this.setPosition(this.minH,n),this.translateFn(this.lowValue,this.minLab,"model"),this.setPosition(this.minLab,this.getHandleLabelPos("minLab",n)),this.options.getPointerColor){var t=this.getPointerColor("min");this.scope.minPointerStyle={backgroundColor:t}}this.options.autoHideLimitLabels&&this.shFloorCeil()},updateHighHandle:function(n){if(this.setPosition(this.maxH,n),this.translateFn(this.highValue,this.maxLab,"high"),this.setPosition(this.maxLab,this.getHandleLabelPos("maxLab",n)),this.options.getPointerColor){var t=this.getPointerColor("max");this.scope.maxPointerStyle={backgroundColor:t}}this.options.autoHideLimitLabels&&this.shFloorCeil()},shFloorCeil:function(){var r,u;if(!this.options.hidePointerLabels){var n=!1,t=!1,i=this.isLabelBelowFloorLab(this.minLab),f=this.isLabelAboveCeilLab(this.minLab),e=this.isLabelAboveCeilLab(this.maxLab),o=this.isLabelBelowFloorLab(this.cmbLab),s=this.isLabelAboveCeilLab(this.cmbLab);i?(n=!0,this.hideEl(this.flrLab)):(n=!1,this.showEl(this.flrLab));f?(t=!0,this.hideEl(this.ceilLab)):(t=!1,this.showEl(this.ceilLab));this.range&&(r=this.cmbLabelShown?s:e,u=this.cmbLabelShown?o:i,r?this.hideEl(this.ceilLab):t||this.showEl(this.ceilLab),u?this.hideEl(this.flrLab):n||this.showEl(this.flrLab))}},isLabelBelowFloorLab:function(n){var r=this.options.rightToLeft,t=n.rzsp,u=n.rzsd,i=this.flrLab.rzsp,f=this.flrLab.rzsd;return r?t+u>=i-2:t<=i+f+2},isLabelAboveCeilLab:function(n){var r=this.options.rightToLeft,t=n.rzsp,u=n.rzsd,i=this.ceilLab.rzsp,f=this.ceilLab.rzsd;return r?t<=i+f+2:t+u>=i-2},updateSelectionBar:function(){var n=0,t=0,e=this.options.rightToLeft?!this.options.showSelectionBarEnd:this.options.showSelectionBarEnd,s=this.options.rightToLeft?this.maxH.rzsp+this.handleHalfDim:this.minH.rzsp+this.handleHalfDim,o;if(this.range)t=Math.abs(this.maxH.rzsp-this.minH.rzsp),n=s;else if(this.options.showSelectionBarFromValue!==null){var r=this.options.showSelectionBarFromValue,u=this.valueToPosition(r),h=this.options.rightToLeft?this.lowValue<=r:this.lowValue>r;h?(t=this.minH.rzsp-u,n=u+this.handleHalfDim):(t=u-this.minH.rzsp,n=this.minH.rzsp+this.handleHalfDim)}else e?(t=Math.abs(this.maxPos-this.minH.rzsp)+this.handleHalfDim,n=this.minH.rzsp+this.handleHalfDim):(t=this.minH.rzsp+this.handleHalfDim,n=0);if(this.setDimension(this.selBar,t),this.setPosition(this.selBar,n),this.range&&this.options.showOuterSelectionBars&&(this.options.rightToLeft?(this.setDimension(this.rightOutSelBar,n),this.setPosition(this.rightOutSelBar,0),this.setDimension(this.leftOutSelBar,this.getDimension(this.fullBar)-(n+t)),this.setPosition(this.leftOutSelBar,n+t)):(this.setDimension(this.leftOutSelBar,n),this.setPosition(this.leftOutSelBar,0),this.setDimension(this.rightOutSelBar,this.getDimension(this.fullBar)-(n+t)),this.setPosition(this.rightOutSelBar,n+t))),this.options.getSelectionBarColor)o=this.getSelectionBarColor(),this.scope.barStyle={backgroundColor:o};else if(this.options.selectionBarGradient){var f=this.options.showSelectionBarFromValue!==null?this.valueToPosition(this.options.showSelectionBarFromValue):0,i=f-n>0^e,c=this.options.vertical?i?"bottom":"top":i?"left":"right";this.scope.barStyle={backgroundImage:"linear-gradient(to "+c+", "+this.options.selectionBarGradient.from+" 0%,"+this.options.selectionBarGradient.to+" 100%)"};this.options.vertical?(this.scope.barStyle.backgroundPosition="center "+(f+t+n+(i?-this.handleHalfDim:0))+"px",this.scope.barStyle.backgroundSize="100% "+(this.barDimension-this.handleHalfDim)+"px"):(this.scope.barStyle.backgroundPosition=f-n+(i?this.handleHalfDim:0)+"px center",this.scope.barStyle.backgroundSize=this.barDimension-this.handleHalfDim+"px 100%")}},getSelectionBarColor:function(){return this.range?this.options.getSelectionBarColor(this.scope.rzSliderModel,this.scope.rzSliderHigh):this.options.getSelectionBarColor(this.scope.rzSliderModel)},getPointerColor:function(n){return n==="max"?this.options.getPointerColor(this.scope.rzSliderHigh,n):this.options.getPointerColor(this.scope.rzSliderModel,n)},getTickColor:function(n){return this.options.getTickColor(n)},updateCmbLabel:function(){var i=null,u;if(i=this.options.rightToLeft?this.minLab.rzsp-this.minLab.rzsd-10<=this.maxLab.rzsp:this.minLab.rzsp+this.minLab.rzsd+10>=this.maxLab.rzsp,i){var n=this.getDisplayValue(this.lowValue,"model"),t=this.getDisplayValue(this.highValue,"high"),r="";r=this.options.mergeRangeLabelsIfSame&&n===t?n:this.options.rightToLeft?t+this.options.labelOverlapSeparator+n:n+this.options.labelOverlapSeparator+t;this.translateFn(r,this.cmbLab,"cmb",!1);u=this.options.boundPointerLabels?Math.min(Math.max(this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2,0),this.barDimension-this.cmbLab.rzsd):this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2;this.setPosition(this.cmbLab,u);this.cmbLabelShown=!0;this.hideEl(this.minLab);this.hideEl(this.maxLab);this.showEl(this.cmbLab)}else this.cmbLabelShown=!1,this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateLowHandle(this.valueToPosition(this.lowValue)),this.showEl(this.maxLab),this.showEl(this.minLab),this.hideEl(this.cmbLab);this.options.autoHideLimitLabels&&this.shFloorCeil()},getDisplayValue:function(n,t){return this.options.stepsArray&&!this.options.bindIndexForStepsArray&&(n=this.getStepValue(n)),this.customTrFn(n,this.options.id,t)},roundStep:function(n,t){var r=t?t:this.step,i=parseFloat((n-this.minValue)/r).toPrecision(12),u;return i=Math.round(+i)*r,u=(this.minValue+i).toFixed(this.precision),+u},hideEl:function(n){return n.css({visibility:"hidden"})},showEl:function(n){return!n.rzAlwaysHide?n.css({visibility:"visible"}):n},setPosition:function(n,t){n.rzsp=t;var i={};return i[this.positionProperty]=Math.round(t)+"px",n.css(i),t},getDimension:function(n){var t=n[0].getBoundingClientRect();return n.rzsd=this.options.vertical?(t.bottom-t.top)*this.options.scale:(t.right-t.left)*this.options.scale,n.rzsd},setDimension:function(n,t){n.rzsd=t;var i={};return i[this.dimensionProperty]=Math.round(t)+"px",n.css(i),t},sanitizeValue:function(n){return Math.min(Math.max(n,this.minValue),this.maxValue)},valueToPosition:function(n){var i=this.linearValueToPosition,t;return this.options.customValueToPosition?i=this.options.customValueToPosition:this.options.logScale&&(i=this.logValueToPosition),n=this.sanitizeValue(n),t=i(n,this.minValue,this.maxValue)||0,this.options.rightToLeft&&(t=1-t),t*this.maxPos},linearValueToPosition:function(n,t,i){var r=i-t;return(n-t)/r},logValueToPosition:function(n,t,i){n=Math.log(n);t=Math.log(t);i=Math.log(i);var r=i-t;return(n-t)/r},positionToValue:function(n){var i=n/this.maxPos,t;return this.options.rightToLeft&&(i=1-i),t=this.linearPositionToValue,this.options.customPositionToValue?t=this.options.customPositionToValue:this.options.logScale&&(t=this.logPositionToValue),t(i,this.minValue,this.maxValue)||0},linearPositionToValue:function(n,t,i){return n*(i-t)+t},logPositionToValue:function(n,t,i){t=Math.log(t);i=Math.log(i);var r=n*(i-t)+t;return Math.exp(r)},getEventAttr:function(n,t){return n.originalEvent===undefined?n[t]:n.originalEvent[t]},getEventXY:function(n,t){var u=this.options.vertical?"clientY":"clientX",i,r;if(n[u]!==undefined)return n[u];if(i=this.getEventAttr(n,"touches"),t!==undefined)for(r=0;r<i.length;r++)if(i[r].identifier===t)return i[r][u];return i[0][u]},getEventPosition:function(n,t){var i=this.sliderElem.rzsp,r=0;return r=this.options.vertical?-this.getEventXY(n,t)+i:this.getEventXY(n,t)-i,r*this.options.scale-this.handleHalfDim},getEventNames:function(n){var t={moveEvent:"",endEvent:""};return this.getEventAttr(n,"touches")?(t.moveEvent="touchmove",t.endEvent="touchend"):(t.moveEvent="mousemove",t.endEvent="mouseup"),t},getNearestHandle:function(n){if(!this.range)return this.minH;var t=this.getEventPosition(n),i=Math.abs(t-this.minH.rzsp),r=Math.abs(t-this.maxH.rzsp);return i<r?this.minH:i>r?this.maxH:this.options.rightToLeft?t>this.minH.rzsp?this.minH:this.maxH:t<this.minH.rzsp?this.minH:this.maxH},focusElement:function(n){n[0].focus()},bindEvents:function(){var t,i,r;if(this.options.draggableRange?(t="rzSliderDrag",i=this.onDragStart,r=this.onDragMove):(t="lowValue",i=this.onStart,r=this.onMove),!this.options.onlyBindHandles){this.selBar.on("mousedown",n.bind(this,i,null,t));this.selBar.on("mousedown",n.bind(this,r,this.selBar))}if(this.options.draggableRangeOnly){this.minH.on("mousedown",n.bind(this,i,null,t));this.maxH.on("mousedown",n.bind(this,i,null,t))}else{this.minH.on("mousedown",n.bind(this,this.onStart,this.minH,"lowValue"));if(this.range)this.maxH.on("mousedown",n.bind(this,this.onStart,this.maxH,"highValue"));if(!this.options.onlyBindHandles){this.fullBar.on("mousedown",n.bind(this,this.onStart,null,null));this.fullBar.on("mousedown",n.bind(this,this.onMove,this.fullBar));this.ticks.on("mousedown",n.bind(this,this.onStart,null,null));this.ticks.on("mousedown",n.bind(this,this.onTickClick,this.ticks))}}if(!this.options.onlyBindHandles){this.selBar.on("touchstart",n.bind(this,i,null,t));this.selBar.on("touchstart",n.bind(this,r,this.selBar))}if(this.options.draggableRangeOnly){this.minH.on("touchstart",n.bind(this,i,null,t));this.maxH.on("touchstart",n.bind(this,i,null,t))}else{this.minH.on("touchstart",n.bind(this,this.onStart,this.minH,"lowValue"));if(this.range)this.maxH.on("touchstart",n.bind(this,this.onStart,this.maxH,"highValue"));if(!this.options.onlyBindHandles){this.fullBar.on("touchstart",n.bind(this,this.onStart,null,null));this.fullBar.on("touchstart",n.bind(this,this.onMove,this.fullBar));this.ticks.on("touchstart",n.bind(this,this.onStart,null,null));this.ticks.on("touchstart",n.bind(this,this.onTickClick,this.ticks))}}if(this.options.keyboardSupport){this.minH.on("focus",n.bind(this,this.onPointerFocus,this.minH,"lowValue"));if(this.range)this.maxH.on("focus",n.bind(this,this.onPointerFocus,this.maxH,"highValue"))}},unbindEvents:function(){this.minH.off();this.maxH.off();this.fullBar.off();this.selBar.off();this.ticks.off()},onStart:function(t,r,u){var f,e,s=this.getEventNames(u),o;u.stopPropagation();u.preventDefault();this.calcViewDimensions();t?this.tracking=r:(t=this.getNearestHandle(u),this.tracking=t===this.minH?"lowValue":"highValue");t.addClass("rz-active");this.options.keyboardSupport&&this.focusElement(t);f=n.bind(this,this.dragging.active?this.onDragMove:this.onMove,t);e=n.bind(this,this.onEnd,f);i.on(s.moveEvent,f);i.on(s.endEvent,e);this.endHandlerToBeRemovedOnEnd=e;this.callOnStart();o=this.getEventAttr(u,"changedTouches");o&&(this.touchId||(this.isDragging=!0,this.touchId=o[0].identifier))},onMove:function(t,i,r){var f=this.getEventAttr(i,"changedTouches"),o,e;if(f)for(e=0;e<f.length;e++)if(f[e].identifier===this.touchId){o=f[e];break}if(!f||o){var s=this.getEventPosition(i,o?o.identifier:undefined),u,h=this.options.rightToLeft?this.minValue:this.maxValue,c=this.options.rightToLeft?this.maxValue:this.minValue;s<=0?u=c:s>=this.maxPos?u=h:(u=this.positionToValue(s),u=r&&n.isNumber(this.options.showTicks)?this.roundStep(u,this.options.showTicks):this.roundStep(u));this.positionTrackingHandle(u)}},onEnd:function(n,t){var u=this.getEventAttr(t,"changedTouches"),r;u&&u[0].identifier!==this.touchId||(this.isDragging=!1,this.touchId=null,this.options.keyboardSupport||(this.minH.removeClass("rz-active"),this.maxH.removeClass("rz-active"),this.tracking=""),this.dragging.active=!1,r=this.getEventNames(t),i.off(r.moveEvent,n),i.off(r.endEvent,this.endHandlerToBeRemovedOnEnd),this.endHandlerToBeRemovedOnEnd=null,this.callOnEnd())},onTickClick:function(n,t){this.onMove(n,t,!0)},onPointerFocus:function(t,i){this.tracking=i;t.one("blur",n.bind(this,this.onPointerBlur,t));t.on("keydown",n.bind(this,this.onKeyboardEvent));t.on("keyup",n.bind(this,this.onKeyUp));this.firstKeyDown=!0;t.addClass("rz-active");this.currentFocusElement={pointer:t,ref:i}},onKeyUp:function(){this.firstKeyDown=!0;this.callOnEnd()},onPointerBlur:function(n){n.off("keydown");n.off("keyup");n.removeClass("rz-active");this.isDragging||(this.tracking="",this.currentFocusElement=null)},getKeyActions:function(n){var i=n+this.step,r=n-this.step,u=n+this.valueRange/10,f=n-this.valueRange/10,t;return this.options.reversedControls&&(i=n-this.step,r=n+this.step,u=n-this.valueRange/10,f=n+this.valueRange/10),t={UP:i,DOWN:r,LEFT:r,RIGHT:i,PAGEUP:u,PAGEDOWN:f,HOME:this.options.reversedControls?this.maxValue:this.minValue,END:this.options.reversedControls?this.minValue:this.maxValue},this.options.rightToLeft&&(t.LEFT=i,t.RIGHT=r,this.options.vertical&&(t.UP=r,t.DOWN=i)),t},onKeyboardEvent:function(n){var u=this[this.tracking],f=n.keyCode||n.which,e=this.getKeyActions(u),o={38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"}[f],r=e[o],i;r!=null&&this.tracking!==""&&(n.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.callOnStart()),i=this,t(function(){var u=i.roundStep(i.sanitizeValue(r)),f,n,t;i.options.draggableRangeOnly?(f=i.highValue-i.lowValue,i.tracking==="lowValue"?(n=u,t=u+f,t>i.maxValue&&(t=i.maxValue,n=t-f)):(t=u,n=u-f,n<i.minValue&&(n=i.minValue,t=n+f)),i.positionTrackingBar(n,t)):i.positionTrackingHandle(u)}))},onDragStart:function(n,t,i){var r=this.getEventPosition(i);this.dragging={active:!0,value:this.positionToValue(r),difference:this.highValue-this.lowValue,lowLimit:this.options.rightToLeft?this.minH.rzsp-r:r-this.minH.rzsp,highLimit:this.options.rightToLeft?r-this.maxH.rzsp:this.maxH.rzsp-r};this.onStart(n,t,i)},getValue:function(n,t,i,r){var u=this.options.rightToLeft,f=null;return f=n==="min"?i?r?u?this.minValue:this.maxValue-this.dragging.difference:u?this.maxValue-this.dragging.difference:this.minValue:u?this.positionToValue(t+this.dragging.lowLimit):this.positionToValue(t-this.dragging.lowLimit):i?r?u?this.minValue+this.dragging.difference:this.maxValue:u?this.maxValue:this.minValue+this.dragging.difference:u?this.positionToValue(t+this.dragging.lowLimit)+this.dragging.difference:this.positionToValue(t-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(f)},onDragMove:function(n,t){var i=this.getEventPosition(t),r,u,f,e,h,c,o,s;if(this.options.rightToLeft?(f=this.dragging.lowLimit,e=this.dragging.highLimit,o=this.maxH,s=this.minH):(f=this.dragging.highLimit,e=this.dragging.lowLimit,o=this.minH,s=this.maxH),h=i<=e,c=i>=this.maxPos-f,h){if(o.rzsp===0)return;r=this.getValue("min",i,!0,!1);u=this.getValue("max",i,!0,!1)}else if(c){if(s.rzsp===this.maxPos)return;u=this.getValue("max",i,!0,!0);r=this.getValue("min",i,!0,!0)}else r=this.getValue("min",i,!1),u=this.getValue("max",i,!1);this.positionTrackingBar(r,u)},positionTrackingBar:function(n,t){this.options.minLimit!=null&&n<this.options.minLimit&&(n=this.options.minLimit,t=n+this.dragging.difference);this.options.maxLimit!=null&&t>this.options.maxLimit&&(t=this.options.maxLimit,n=t-this.dragging.difference);this.lowValue=n;this.highValue=t;this.applyLowValue();this.range&&this.applyHighValue();this.applyModel(!0);this.updateHandles("lowValue",this.valueToPosition(n));this.updateHandles("highValue",this.valueToPosition(t))},positionTrackingHandle:function(n){var t=!1;n=this.applyMinMaxLimit(n);this.range&&(this.options.pushRange?(n=this.applyPushRange(n),t=!0):(this.options.noSwitching&&(this.tracking==="lowValue"&&n>this.highValue?n=this.applyMinMaxRange(this.highValue):this.tracking==="highValue"&&n<this.lowValue&&(n=this.applyMinMaxRange(this.lowValue))),n=this.applyMinMaxRange(n),this.tracking==="lowValue"&&n>this.highValue?(this.lowValue=this.highValue,this.applyLowValue(),this.applyModel(),this.updateHandles(this.tracking,this.maxH.rzsp),this.updateAriaAttributes(),this.tracking="highValue",this.minH.removeClass("rz-active"),this.maxH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.maxH),t=!0):this.tracking==="highValue"&&n<this.lowValue&&(this.highValue=this.lowValue,this.applyHighValue(),this.applyModel(),this.updateHandles(this.tracking,this.minH.rzsp),this.updateAriaAttributes(),this.tracking="lowValue",this.maxH.removeClass("rz-active"),this.minH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.minH),t=!0)));this[this.tracking]!==n&&(this[this.tracking]=n,this.tracking==="lowValue"?this.applyLowValue():this.applyHighValue(),this.applyModel(),this.updateHandles(this.tracking,this.valueToPosition(n)),this.updateAriaAttributes(),t=!0);t&&this.applyModel(!0)},applyMinMaxLimit:function(n){return this.options.minLimit!=null&&n<this.options.minLimit?this.options.minLimit:this.options.maxLimit!=null&&n>this.options.maxLimit?this.options.maxLimit:n},applyMinMaxRange:function(n){var i=this.tracking==="lowValue"?this.highValue:this.lowValue,t=Math.abs(n-i);return this.options.minRange!=null&&t<this.options.minRange?this.tracking==="lowValue"?this.highValue-this.options.minRange:this.lowValue+this.options.minRange:this.options.maxRange!=null&&t>this.options.maxRange?this.tracking==="lowValue"?this.highValue-this.options.maxRange:this.lowValue+this.options.maxRange:n},applyPushRange:function(n){var r=this.tracking==="lowValue"?this.highValue-n:n-this.lowValue,t=this.options.minRange!==null?this.options.minRange:this.options.step,i=this.options.maxRange;return r<t?(this.tracking==="lowValue"?(this.highValue=Math.min(n+t,this.maxValue),n=this.highValue-t,this.applyHighValue(),this.updateHandles("highValue",this.valueToPosition(this.highValue))):(this.lowValue=Math.max(n-t,this.minValue),n=this.lowValue+t,this.applyLowValue(),this.updateHandles("lowValue",this.valueToPosition(this.lowValue))),this.updateAriaAttributes()):i!==null&&r>i&&(this.tracking==="lowValue"?(this.highValue=n+i,this.applyHighValue(),this.updateHandles("highValue",this.valueToPosition(this.highValue))):(this.lowValue=n-i,this.applyLowValue(),this.updateHandles("lowValue",this.valueToPosition(this.lowValue))),this.updateAriaAttributes()),n},applyModel:function(n){this.internalChange=!0;this.scope.$apply();n&&this.callOnChange();this.internalChange=!1},callOnStart:function(){if(this.options.onStart){var n=this,t=this.tracking==="lowValue"?"min":"max";this.scope.$evalAsync(function(){n.options.onStart(n.options.id,n.scope.rzSliderModel,n.scope.rzSliderHigh,t)})}},callOnChange:function(){if(this.options.onChange){var n=this,t=this.tracking==="lowValue"?"min":"max";this.scope.$evalAsync(function(){n.options.onChange(n.options.id,n.scope.rzSliderModel,n.scope.rzSliderHigh,t)})}},callOnEnd:function(){if(this.options.onEnd){var n=this,t=this.tracking==="lowValue"?"min":"max";this.scope.$evalAsync(function(){n.options.onEnd(n.options.id,n.scope.rzSliderModel,n.scope.rzSliderHigh,t)})}this.scope.$emit("slideEnded")}},o}]).directive("rzslider",["RzSlider",function(n){return{restrict:"AE",replace:!0,scope:{rzSliderModel:"=?",rzSliderHigh:"=?",rzSliderOptions:"&?",rzSliderTplUrl:"@"},templateUrl:function(n,t){return t.rzSliderTplUrl||"rzSliderTpl.html"},link:function(t,i){t.slider=new n(t,i)}}}]);return t.run(["$templateCache",function(n){n.put("rzSliderTpl.html",'<div class=rzslider><span class="rz-bar-wrapper rz-left-out-selection"><span class=rz-bar><\/span><\/span> <span class="rz-bar-wrapper rz-right-out-selection"><span class=rz-bar><\/span><\/span> <span class=rz-bar-wrapper><span class=rz-bar><\/span><\/span> <span class=rz-bar-wrapper><span class="rz-bar rz-selection" ng-style=barStyle><\/span><\/span> <span class="rz-pointer rz-pointer-min" ng-style=minPointerStyle><\/span> <span class="rz-pointer rz-pointer-max" ng-style=maxPointerStyle><\/span> <span class="rz-bubble rz-limit rz-floor"><\/span> <span class="rz-bubble rz-limit rz-ceil"><\/span> <span class="rz-bubble rz-model-value"><\/span> <span class="rz-bubble rz-model-high"><\/span> <span class=rz-bubble><\/span><ul ng-show=showTicks class=rz-ticks><li ng-repeat="t in ticks track by $index" class=rz-tick ng-class="{\'rz-selected\': t.selected}" ng-style=t.style ng-attr-uib-tooltip="{{ t.tooltip }}" ng-attr-tooltip-placement={{t.tooltipPlacement}} ng-attr-tooltip-append-to-body="{{ t.tooltip ? true : undefined}}"><span ng-if="t.value != null" class=rz-tick-value ng-attr-uib-tooltip="{{ t.valueTooltip }}" ng-attr-tooltip-placement={{t.valueTooltipPlacement}}>{{ t.value }}<\/span> <span ng-if="t.legend != null" class=rz-tick-legend>{{ t.legend }}<\/span><\/li><\/ul><\/div>')}]),t.name});AssetLib2Core=AssetLib2Core||{};AssetLib2Core.updateQueryStringParameter=function(n,t,i){var u=new RegExp("([?&])"+t+"=.*?(&|#|$)","i"),r,f;return n.match(u)?n.replace(u,"$1"+t+"="+i+"$2"):(r="",n.indexOf("#")!==-1&&(r=n.replace(/.*#/,"#"),n=n.replace(/#.*/,"")),f=n.indexOf("?")!==-1?"&":"?",n+f+t+"="+i+r)};AssetLib2Core.formatBytes=function(n,t){if(n==0)return"0 Byte";var r=1e3,e=t+1||3,u=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(n)/Math.log(r)),f=parseFloat((n/Math.pow(r,i)).toFixed(e));return t===0?parseInt(f)+" "+u[i]:f+" "+u[i]};AssetLib2Core.buildFileSizeFormat=function(n){return(n&&n.FileSize)?AssetLib2Core.formatBytes(n.FileSize,0):""};AssetLib2Core.buildContentCard=function(n,t,i){var f=[],u,r;if(!n)return f;for(u=0;u<n.length;u++)r=n[u],r.IsDownloadLink?(r.AssetFileSizeFormat=AssetLib2Core.buildFileSizeFormat(r),r.LinkDisplayText=t):r.LinkDisplayText=i,f.push(r);return f};AssetLib2Core.buildContentCard2=function(n,t,i,r){var e=[],f,u;if(!n)return e;for(f=0;f<n.length;f++)u=n[f],u.IconTypeString==="Download"?(u.AssetFileSizeFormat=AssetLib2Core.buildFileSizeFormat(u),u.LinkDisplayText=t,u.bulkDownloadEnabled=r):u.LinkDisplayText=i,e.push(u);return e};AssetLib2Core.getPageZeroBased=function(n){return(n&&n.page)?parseInt(n.page,10)-1||0:0};AssetLib2Core._queryString=function(n){var r,t,i;if(n=="")return{};for(r={},t=0;t<n.length;++t)i=n[t].split("=",2),r[i[0]]=i.length==1?"":decodeURIComponent(i[1].replace(/\+/g," "));return r}(window.location.search.substr(1).split("&"));AssetLib2Core._locale="";AssetLib2Core.getLocale=function(){var n,t;if(AssetLib2Core._locale.length===0)if(gmositecore._isPreview==="false"){n=document.createElement("a");t=window.location.href;n.href=t;var i=n.protocol+"//"+n.hostname,r=i.length,u=t.substring(r,t.length).split("/");AssetLib2Core._locale=u[1]}else AssetLib2Core._locale=AssetLib2Core._queryString.sc_lang;return AssetLib2Core._locale};AssetLib2Core.parsePagingSummary=function(n,t,i,r){if(!n)return"";var f=(t+1)*i-i+1,e=(t+1)*i>=r,o=e?r:(t+1)*i,s=f+"-"+o,h="<strong>"+s+"<\/strong>",c="<strong>"+r+"<\/strong>",u=n.replace("{TotalAssets}",c);return u?u.replace("{AssetRange}",h):""},function(){"use strict";angular&&angular.module&&angular.module("common",[])}(),function(){"use strict";function n(){return function(n,t){var i=[];return angular.forEach(n,function(n){n.FilterQueryStringName==Object.keys(t)[0]&&i.push(n)}),i}}angular.module("common").filter("filterParamsFilter",n)}(),function(){"use strict";function n(){function n(n){return AssetLib2Core.getPageZeroBased(n)}function t(n,t,i){return AssetLib2Core.buildContentCard(n,t,i)}function i(n,t,i,r){return AssetLib2Core.buildContentCard2(n,t,i,r)}function r(){return AssetLibrary2.OneCard.monitorEllipsis(),!1}function u(n,t,i,r){return AssetLib2Core.parsePagingSummary(n,t,i,r)}return{getPageZeroBased:n,buildContentCard:t,monitorEllipsis:r,parsePagingSummary:u,buildContentCard2:i}}angular.module("common").service("assetLib2Service",n);n.$inject=[]}(),function(){"use strict";function n(){function n(){return"contentfinder2-results"}function t(){return"contentfinder2-paged-results"}function i(){return"contentfinder2-assets-per-page"}function r(){return"contentfinder2-current-page-changed"}function u(){return"contentfinder2-show-results"}function f(){return"contentfinder2-num-filter-in-use-changed"}function e(){return"contentfinder2-clear-all-filters"}function o(){return"contentfinder2-gallery-config"}function s(){return"contentfinder2-gallery-view-switch"}return{resultsBroadcast:n,pagedResultsBroadcast:t,assetsPerPageBroadcast:i,currentPageChangedBroadcast:r,showResultsBroadcast:u,numFiltersInUseChangedBroadcast:f,clearAllFiltersBroadcast:e,galleryConfigBroadcast:o,galleryViewSwitchBroadcast:s,galleryConfig:[],viewToggleConfig:[]}}angular.module("common").service("notificationService",n);n.$inject=[]}(),function(){"use strict";function n(n){function t(){return AssetLib2Core?AssetLib2Core.getLocale():"en-us"}function i(){return n.when(t())}return{getLocale:t,getLocalePromise:i}}angular.module("common").service("localeService",n);n.$inject=["$q"]}(),function(){"use strict";function i(){function c(n){for(var i,t="",r=0;r<n.length;r++)i=n[r],i&&i.Name&&(t!==""?t.indexOf(i.Name)<0&&(t=t+"|"+i.Name):t=i.Name);return t}function u(n){for(var i,r=[],t=0;t<n.length;t++)i=n[t],i.isChecked&&r.push(i);return r}function i(n){var t=[];return n&&n.Enabled&&n.Filters&&(t=u(n.Filters)),t}function l(n){for(var u,r=[],t=0;t<n.length;t++)u=n[t],r[t]=i(u);return r}function a(n,t){var u=r(t),i;if(u){if(n&&n.Enabled)for(n.countInUse=0,n.Categories=h(n.Categories,u),i=0;i<n.Categories.length;i++)n.countInUse+=n.Categories[i].countInUse;return n}}function v(n){return f(n,null)}function f(n,t){for(var i,r=0;r<n.length;r++)i=n[r],t?t.Id==i.Id&&i.isChecked&&(i.isChecked=!1):i.isChecked=!1;return n}function e(n){for(var t,i=0;i<n.length;i++)t=n[i],t.Enabled&&(t.Filters=v(t.Filters)),t.countInUse=0;return n}function y(n){return n&&n.Enabled&&(n.Categories=e(n.Categories),n.countInUse=0),n}function p(n,t){var r,i;if(n&&n.Enabled)for(n.countInUse=0,r=0;r<n.Categories.length;r++)i=n.Categories[r],i.Filters=f(i.Filters,t),i.countInUse=u(i.Filters).length,n.countInUse+=i.countInUse;return n}function o(n){var i=[],t,f,r;if(n&&n.Enabled)for(t=0;t<n.Categories.length;t++)f=n.Categories[t],r=u(f.Filters),r.length&&(i=i.concat(r));return i}function w(n,t){for(var r,i=0;i<t.length;i++)if(r=t[i],r&&n.Name&&r.toLowerCase()==n.Name.toLowerCase()){n.isChecked=!0;break}return n}function b(n,t){for(var r,i=0;i<n.length;i++)r=n[i],r=w(r,t);return n}function s(n,t){return n.Filters=b(n.Filters,t),n.Enabled=!0,n.countInUse=i(n).length,n}function k(n,t){var i=r(t);if(i)return n&&n.Enabled&&(n=s(n,i)),n}function h(n,t){for(var r,i=0;i<n.length;i++)r=n[i],r=s(r,t);return n}function d(n,t){var i=r(t);if(i)return n&&n.Enabled&&(n.Categories=h(n.Categories,i)),n}function r(n){return n?n.split("|"):null}function g(n,r,u,f){for(var e,c,s,h=[],o=0;o<u;o++)e=n.Filters[o],e.Expanded=!1,e.Enabled=!0,c=r[o],k(e,f[c]),e.countInUse=i(e).length,t[o]!=undefined?e.Expanded=t[o]:(e.countInUse||t[o])&&(e.Expanded=!0),t[o]=e.Expanded==!0,h[o]=e;for(s=u;s>0;s--)if(h[s-1].Enabled){h[s-1].isLastEnabled=!0;break}return h}function nt(n){var i=0,t;if(n)for(t=0;t<n.length;t++)i+=n[t].countInUse||0;return i}function tt(n,i){t[n]=i}function it(t,r){var u=t,s,f,h,e,c;if(u.Expanded=!1,u.Enabled=!0,d(u,r),s=o(u),u.countInUse=s&&s.length,n.length==0&&u.Categories.length>0&&(n=new Array(u.Categories.length)),u.Enabled)for(u.countInUse=0,f=0;f<u.Categories.length;f++){if(n[f]!=undefined)u.Categories[f].expanded=n[f];else for(h=u.Categories[f],u.Categories[f].expanded=!1,n[f]=!1,e=0;e<h.Filters.length;e++)if(c=h.Filters[e],c.isChecked){u.Categories[f].expanded=!0;n[f]=!0;break}u.Categories[f].Enabled=!0;u.Categories[f].countInUse=i(u.Categories[f]).length;u.countInUse+=u.Categories[f].countInUse}return u}function rt(){t=[];n=[]}function ut(n,t){for(var u,f,r,e,i=0;i<n.length;i++)for(u=n[i],f=u.Filters,r=0;r<f.length;r++)if(e=f[r],e.Id===t.Id){e.isEnabled=!0;u.Enabled=!0;break}}function ft(n,t){for(var u,f,r,i=0;i<n.length;i++)for(u=n[i],u.Enabled=t,f=u.Filters,r=0;r<f.length;r++)f[r].isEnabled=t}function et(n){for(var f,r,t,u=0;u<n.length;u++){for(f=n[u],r=f.Filters,t=0;t<r.length;t++)r[t].isChecked===!0&&r[t].isEnabled===!1&&(r[t].isChecked=!1);f.countInUse=i(f).length}}return{getAllCheckedFilters:l,getCheckedFilters:i,getCheckedCampaigns:o,clearFilters:e,clearCampaigns:y,uncheckCategoryFilters:p,setCategoryFilters:a,concatFilters:c,buildFilters:g,buildCategoryFilter:it,parseFilters:r,getFiltersInUseTotalCount:nt,saveExpandedToggle:tt,initializeExpanded:rt,updateFiltersList:ut,enableOrDisableAllFilters:ft,clearIsCheckedForDisabledFilter:et}}angular.module("common").factory("filterService",i);i.$inject=["$q","$filter"];var t=[],n=[]}(),function(){"use strict";function n(n){function t(t,i,r,u,f,e,o,s,h,c,l,a,v){var p,w,k,d,g,y,b;for(typeof c=="undefined"&&(c=0),typeof l=="undefined"&&(l=0),typeof a=="undefined"&&(a=0),typeof v=="undefined"&&(v=0),p="/api/v2/assetlib2/finder/search2?galleryId="+i+"&locale="+r+"&page="+u+"&contextItemId="+gmositecore._contextItemId+"&isPreview="+gmositecore._isPreview+"&search="+encodeURIComponent(o)+"&sort="+s+"&facets="+h+"&widthMin="+c+"&widthMax="+l+"&heightMin="+a+"&heightMax="+v,w=0;w<f.length;w++)for(k=f[w],p=p+"&filters["+w+"]=",y=0;y<k.length;y++)p=y==0?p+k[y].Id:p+"&filters["+w+"]="+k[y].Id;for(d=[],g=0,y=0;y<e.length;y++)b=e[y].Id,b&&d.indexOf(b)<0&&(d.push(b),p=p+"&categoryFilters["+g+"]="+b,g++);n.get(p).then(function(n){t(n.data)})}function i(t,i,r,u,f,e){var o="/api/v2/assetlib2/finder/pagedSearch?galleryId="+i+"&locale="+r+"&page="+u+"&contextItemId="+gmositecore._contextItemId+"&parentAsset="+$("#sourceId").data("sourceid")+"&isPreview="+gmositecore._isPreview+"&search="+escape(f)+"&sort="+e;n.get(o).then(function(n){t(n.data)})}function r(t,i,r,u,f,e){var o=$("#sourceId").data("sourceid"),s;o===undefined&&(o="");s="/api/v2/assetlib2/finder/pagedsearchfordownloads?galleryId="+i+"&locale="+r+"&page="+u+"&contextItemId="+gmositecore._contextItemId+"&parentAsset="+o+"&isPreview="+gmositecore._isPreview+"&search="+escape(f)+"&sort="+e;n.get(s).then(function(n){t({page:u,data:n.data.AssetCards})})}function u(t,i,r){for(var e,f="/api/v2/assetlib2/queryAssetsById?locale="+i+"&contextItemId="+gmositecore._contextItemId+"&isPreview="+gmositecore._isPreview,u=0;u<r.length;u++)e=r[u],f=f+"&assets["+u+"]="+e;n.get(f).then(function(n){t(n.data)})}function f(n,t,i){$.ajax({type:"POST",url:t,data:i,processData:!1,contentType:"application/json",success:function(n,t,i){window.location=i.getResponseHeader("Location")},error:function(t,i,r){n(r)}})}function e(t,i,r,u,f){if(window.useMsal)window.safeGetMsalToken(function(r){var e,o;if(!r){i("Cannot acquire MSAL access token");return}e=$(".SetFavAsset").data("tenant");e.length==0&&(e=location.hostname);o=u+"api/Favorite?ResourceSysId={"+f.ItemId+"}&Tenant="+e;n({url:o,method:"GET",crossDomain:!0,headers:{Authorization:"Bearer "+r}}).then(function(n){t(f,n.data)},function(n){i(f,n.statusText)})});else{var e=new AuthenticationContext(window.AdalConfig);e.acquireToken(r,function(r,e){var o,s;(r||!e)&&i(r);o=$(".SetFavAsset").data("tenant");o.length==0&&(o=location.hostname);s=u+"api/Favorite?ResourceSysId={"+f.ItemId+"}&Tenant="+o;n({url:s,method:"GET",crossDomain:!0,headers:{Authorization:"Bearer "+e}}).then(function(n){t(f,n.data)},function(n){i(f,n.statusText)})})}}function o(t,i,r,u,f){if(window.useMsal)window.safeGetMsalToken(function(r){r||i("Cannot acquire MSAL access token");var e=u+"api/Favorite/Bulk?Tenant="+f;n({url:e,method:"GET",crossDomain:!0,headers:{Authorization:"Bearer "+r}}).then(function(n){t(n.data)},function(n){i(n.statusText)})});else{var e=new AuthenticationContext(window.AdalConfig);e.acquireToken(r,function(r,e){(r||!e)&&i(r);var o=u+"api/Favorite/Bulk?Tenant="+f;n({url:o,method:"GET",crossDomain:!0,headers:{Authorization:"Bearer "+e}}).then(function(n){t(n.data)},function(n){i(n.statusText)})})}}return{queryAssets:t,queryPagedAssets:i,queryPagedDownloadAssets:r,queryAssetsById:u,doBulkDownload:f,getAssetFavorite:e,getAllFavorites:o}}angular.module("common").service("assetService",n);n.$inject=["$http"]}(),function(){"use strict";function n(n,t){function f(){t(function(){try{u();r()}catch(n){console.log("error tagging content gallery")}},500)}function r(){jQuery(".one-card-x").each(function(){var n=jQuery(this),t=n.attr("data-tracking-bladetype"),i=n.attr("data-tracking-bladename");n.find("a").each(function(){var n=jQuery.trim(jQuery(this).text().toLowerCase());n===""&&(n="image");jQuery(this).attr({"ms.pgarea":"body","ms.interactiontype":1,"ms.title":n,"ms.cmpgrp":"finder","ms.cmpnm":i,"ms.cmptyp":t})})})}function u(){jQuery(".results-pagination-list a").each(function(){var i=jQuery(this).attr("class"),n,t,r;i.indexOf("next")>0?(n="next",t="next"):i.indexOf("prev")>0?(n="prev",t="prev"):(n=jQuery.trim(jQuery(this).text().toLowerCase()),t=jQuery.trim(jQuery(this).text().toLowerCase()));r="pagination";jQuery(this).attr({"ms.pgarea":"body","ms.interactiontype":1,"ms.title":t,"ms.cmpgrp":r,"ms.cmpnm":n,"ms.cmptyp":"link"})})}function e(n,t,r){typeof MscomCustomEvent!="undefined"&&MscomCustomEvent("ms.pgarea=body","ms.interactiontype=1","ms.title="+i(t),"ms.cmpgrp="+i(n),"ms.cmpnm="+i(r),"ms.cmptyp=filter")}function o(n,t,r,u,f,e){typeof MscomCustomEvent!="undefined"&&MscomCustomEvent("ms.pgarea="+i(n),"ms.interactiontype="+i(t),"ms.title="+i(r),"ms.cmpgrp="+i(u),"ms.cmpnm="+i(f),"ms.cmptyp="+i(e))}function i(n){return angular.lowercase(n).trim()}return{tagGalleryResults:f,trackFilter:e,tagCards:r,tagPagination:u,trackOneCard:o}}angular.module("common").service("trackService",n);n.$inject=["$http","$timeout"]}(),function(){"use strict";function n(n){function t(t,i,r){var u="/api/v2/assetlib2/finder/gallery2?galleryId="+r+"&locale="+i+"&contextItemId="+gmositecore._contextItemId+"&isPreview="+gmositecore._isPreview;n.get(u).then(function(n){var i=o(n.data);t(i)})}function i(t,i,r){var u="/api/v2/assetlib2/finder/pagedGallery?galleryId="+r+"&locale="+i+"&contextItemId="+gmositecore._contextItemId+"&isPreview="+gmositecore._isPreview;n.get(u).then(function(n){t(n.data)})}function r(t,i,r,u){var f="/api/v2/assetlib2/finder/getFilterFacets?galleryId="+r+"&locale="+i+"&contextItemId="+gmositecore._contextItemId+"&isPreview="+gmositecore._isPreview+"&search="+escape(u);n.get(f).then(function(n){t(n.data)})}function u(t,i){var r="/api/v2/assetlib2/finder/getSearchConfiguration?locale="+i+"&contextItemId="+gmositecore._contextItemId+"&isPreview="+gmositecore._isPreview;n.get(r).then(function(n){t(n.data)})}function f(t,i){var r="/api/v2/assetlib2/finder/getViewToggleEnabled?locale="+i+"&contextItemId="+gmositecore._contextItemId+"&isPreview="+gmositecore._isPreview;n.get(r).then(function(n){t(n.data)})}function e(t,i,r,u){var f="/api/v2/assetlib2/finder/setGalleryView?locale="+i+"&contextItemId="+gmositecore._contextItemId+"&isPreview="+gmositecore._isPreview+"&galleryName="+r+"&view="+u;n.get(f).then(function(n){t(n.data)})}function o(n){var t,i,r,u,f,o,e,s;if(!(n.CategoryFilter&&n.CategoryFilter.Enabled))return n;for(t={},i=n.CategoryFilter,t.Enabled=i.Enabled,t.FilterHeader=i.FilterHeader,t.FilterQueryStringName=i.FilterQueryStringName,r=n.SelectedFilters.Filters.length,t.StartIndex=r,t.Categories=[],u=0;u<i.Categories.length;u++){for(f=i.Categories[u],o=[],e=0;e<f.Tags.length;e++)o.push(f.Tags[e]);s={Category:f.Category,Enabled:i.Enabled,Index:r,Filters:o};t.Categories.push(s);r++}return n.CategoryFilter=t,n}return{getGallery:t,getPagedGallery:i,getSearchConfiguration:u,getViewToggleEnabled:f,getFilterFacets:r,setGalleryView:e}}angular.module("common").service("galleryService",n);n.$inject=["$http"]}();ContentFinder2=function(){"use strict";function t(){var t={},n=$("#appConfig");if(n&&n.data){var i=n.data("filterscomponent"),r=n.data("gallerycomponent"),u=n.data("searchcomponent"),f=n.data("filterenabled")&&n.data("filterenabled").toLowerCase()=="true",e=n.data("filterscount"),o=n.data("version");t={filterComponent:i,galleryComponent:r,searchComponent:u,filterenabled:f,filtersCount:e,componentVersion:o}}return t}function i(){var t={isEnabled:!1},n=$("#favoritesConfig");return n&&n.data&&(t.isEnabled=n.data("isenabled")),t}if(window.initTracking&&window.analytics)try{window.initTracking()}catch(r){console.log("error loading tracking")}var n=angular.module("contentFinder2App",["ui.router","ui.bootstrap","common","pagedGallerySource","pagedGallery","rzModule"]);return n.config(["$stateProvider","$urlRouterProvider",function(r,u){for(var l,a,h,v=t().filterComponent,s=t().filterenabled,c=n.filters(),f="?",e={},y=t().filtersCount,p=y+1,o=0;o<p;o++)c[o]&&(f=f+c[o]+"&",e[c[o]]={dynamic:!0});f=f+"page&";f=f+"search&";f=f+"sort&";f=f+"view";e.page={dynamic:!0};e.search={dynamic:!0};e.sort={dynamic:!0};e.view={dynamic:!0};u.otherwise("/");l={url:"/"+f,params:e,resolve:{currentLocale:["localeService",function(n){return n.getLocalePromise()}],areFiltersUsed:function(){return s}},views:{"":{templateUrl:"/javascript/AssetLibrary2/v2/ContentFinder2v2/Core/ContentFinder2v2.Shell.html"},"filters@finder":{component:v,bindings:{currentLocale:"currentLocale"}},"gallery@finder":{component:"pagedGallery",bindings:{areFiltersUsed:"areFiltersUsed"}}}};a={url:"/"+f,params:e,resolve:{currentLocale:["localeService",function(n){return n.getLocalePromise()}],areFiltersUsed:function(){return s}},views:{"":{templateUrl:"/javascript/AssetLibrary2/v2/ContentFinder2v2/PagedGallery/ContentFinder2v2.PagedGallery.Detail.Shell.html"},"filters@finder":{component:"contentFinder2FiltersDetail"},"gallery@finder":{component:"pagedGallery",bindings:{areFiltersUsed:"areFiltersUsed"}}}};s||s===undefined?r.state("finder",l):r.state("finder",a);window.useMsal||i().isEnabled&&i().isEnabled=="True"&&(h=new AuthenticationContext(window.AdalConfig),h.getCachedUser()||h.loginInProgress()||h.login())}]),n.filters=function(){for(var i=[],r=t().filtersCount,n=0;n<r;n++)i[n]=$("#filter"+n).data("queryfilter");return i[r]=$("#categoryFilter").data("queryfilter"),i},n.filtersCount=function(){return t().filtersCount},n.keywords=function(){var n="",t=$("#asset-search-keywords");return t.length==1&&(n=t.data("querykeywords")),n},n.run(["$rootScope","$location","$state",function(n,t,i){return angular.extend(n,{$location:t,$state:i})}]),n}(),function(){"use strict";function t(n,t,i,r,u,f,e,o,s,h,c){function kt(t){n.galleryClass=t.GalleryClass}function dt(i){var e,o,f;k=i;n.FilterHeader=i.FilterHeader;n.ClearFilterLink=i.ClearFilterLink;n.FilterContentText=i.FilterContentText;n.FilterResultsText=i.FilterResultsText;n.FiltersAppliedText=i.FiltersAppliedText;n.FilterResultsCountText=i.FilterResultsCountText;n.ViewResultsButtonDisplayText=i.ViewResultsButtonDisplayText;n.ViewResultsButtonTheme=i.ViewResultsButtonTheme;n.DimensionsFilterEnabled=i.DimensionsFilterEnabled;ut=i.PagedGallery.PagingSummaryDisplayFormat;g=i.PagedGallery.AssetsPerPage;ft=i.PagedGallery.DownloadLinkDisplayText;et=i.PagedGallery.ExternalLinkDisplayText;ot=i.PagedGallery.BulkDownloadEnabled&&i.PagedGallery.AllowBulkDownload;n.PagingSummaryDisplayFormat=ut;n.AssetsPerPage=g;n.ResultsHeader=pt;t.StartMinWidth=i.MinWidth;t.StartMaxWidth=i.MaxWidth;t.StartMinHeight=i.MinHeight;t.StartMaxHeight=i.MaxHeight;e=ContentFinder2.filters();o=ContentFinder2.filtersCount();l.Filters=s.buildFilters(i.SelectedFilters,e,o,r);s.enableOrDisableAllFilters(l.Filters,!0);n.countFiltersInUse=s.getFiltersInUseTotalCount(l.Filters);i.CategoryFilter.Enabled&&(l.CategoryFilter=s.buildCategoryFilter(i.CategoryFilter,r[e[o]]),s.enableOrDisableAllFilters(l.CategoryFilter.Categories,!0),n.countFiltersInUse+=l.CategoryFilter.countInUse);t.$broadcast(u.galleryConfigBroadcast,{Gallery:i,PagedGallery:i.PagedGallery});u.galleryConfig.push({PagedGallery:i.PagedGallery});t.$broadcast(u.numFiltersInUseChangedBroadcast,n.countFiltersInUse);f=gt(i);n.DefaultSearchSortOrder=f&&f.QueryStringText?f.QueryStringText:null;i.DimensionsFilterEnabled&&n.$on("dimensionsChanged",function(n,t){st=t.widthMin;ht=t.widthMax;ct=t.heightMin;lt=t.heightMax;b(it,w,p,a,s.getAllCheckedFilters(l.Filters),s.getCheckedCampaigns(l.CategoryFilter),v,y,!1,st,ht,ct,lt)});b(it,w,p,a,s.getAllCheckedFilters(l.Filters),s.getCheckedCampaigns(l.CategoryFilter),v,y,!1);i.FacetedFilterTrimEnabled&&b(ti,w,p,a,[],s.getCheckedCampaigns(l.CategoryFilter),"",y,!0)}function b(n,t,i,r,u,f,o,s,h){var c=ni(s);e.queryAssets(n,t,i,r,u,f,o,c,h)}function it(r){var f,e,o;t.$broadcast(u.resultsBroadcast,r);f=[];r?(r.AssetCards?(f=h.buildContentCard2(r.AssetCards,ft,et,ot),n.pagedItems=f):n.pagedItems=[],n.HitCount=r.HitCount?r.HitCount:0):(n.pagedItems=[],n.HitCount=0);n.PagingSummary=h.parsePagingSummary(n.PagingSummaryDisplayFormat,a,g,n.HitCount);$(".pagingSummary").html(n.PagingSummary);tt=f&&f.length>0;e=Math.ceil(n.HitCount/g);a>=e&&tt==!1&&(o=null,i.go(".",{page:o},{location:"true"}))}function gt(n){var r=n.PagedGallery.Sort,t,i;if(r&&r.Enabled){for(t=0;t<r.Selectors.length;t++)if(i=r.Selectors[t],i.IsDefaultSearchSortOrder)return i;for(t=0;t<r.Selectors.length;t++)if(i=r.Selectors[t],i.QueryStringText&&i.QueryStringText.indexOf("Relevance")>-1)return i}return null}function ni(t){var i=t;return t==""&&v!=""&&(i=n.DefaultSearchSortOrder,d=!0),i}function rt(n){if(n&&n.Facets){s.enableOrDisableAllFilters(l.Filters,!1);for(var t=0;t<n.Facets.length;t++)n.Facets[t].Count>0&&s.updateFiltersList(l.Filters,n.Facets[t]);s.clearIsCheckedForDisabledFilter(l.Filters)}}function ti(n){rt(n);b(yt,w,p,a,s.getAllCheckedFilters(l.Filters),s.getCheckedCampaigns(l.CategoryFilter),v,y,!0)}function yt(n){var t,r,u,i;if(n&&n.Facets){for(t=null,r=0;r<l.Filters.length;r++)if(u=l.Filters[r],u.FilterQueryStringName.toLowerCase()===wt){t=u;break}if(t!=null){for(s.enableOrDisableAllFilters([t],!1),i=0;i<n.Facets.length;i++)n.Facets[i].Count>0&&s.updateFiltersList([t],n.Facets[i]);s.clearIsCheckedForDisabledFilter([t])}}}function ii(){var f,o;l.Filters=s.clearFilters(l.Filters);l.CategoryFilter=s.clearCampaigns(l.CategoryFilter);n.countFiltersInUse=0;var e={},c=ContentFinder2.filters(),h=Object.keys(r);for(f=0;f<h.length;f++)o=h[f],c.indexOf(o)>=0&&(e[o]=null);t.$broadcast(u.numFiltersInUseChangedBroadcast,n.countFiltersInUse);e.page=null;a=0;ContentFinder2.stateChangeFromControllerStarted=!0;i.go(".",e,{location:"true"})}var l=this,a=h.getPageZeroBased(r),g=0,tt=!1,pt=null,ut=null,ft=null,et=null,ot=!1,k=null,st=0,ht=0,ct=0,lt=0,at=!1,wt="lang",bt=function(){return"/javascript/assetlibrary2/contentfinder2/PagedGallery/PagingSummary.html"},vt,nt,v,y,d,p,w;n.pagingSummaryPartial=bt();n.HitCount=0;vt=[];nt=!1;n.showMobileFilters=nt;l.showMobileFilters=nt;v="";r.search&&(v=r.search);l.searchText=v;y="";r.sort&&(y=r.sort);d=!1;h.monitorEllipsis();p=l.currentLocale;w=$("#galleryId").data("galleryid");o.getGallery(dt,p,w);c.getGallerySelectors(kt,p);n.$on(u.currentPageChangedBroadcast,function(n,t){a=t});n.$on(u.clearAllFiltersBroadcast,function(){n.clearFiltersClicked()});n.assetsLoaded=function(){return tt};n.mobileFiltersToggle=function(){n.showMobileFilters===!0?(n.showMobileFilters=!1,l.showMobileFilters=!1):(n.showMobileFilters=!0,l.showMobileFilters=!0);nt=n.showMobileFilters;t.$broadcast(u.showResultsBroadcast,!n.showMobileFilters);$(window).scrollTop("slow")};n.categoryFilterToggle=function(t){n.CategoryFilter.Categories[t].expanded=n.CategoryFilter.Categories[t].expanded===!0?!1:!0;vt[t]=n.CategoryFilter.Categories[t].expanded};l.filterClicked=function(r,f,e){var o={},y=ContentFinder2.filters(),v=e.FilterNumber!==undefined,h,c;v?(h=s.getCheckedFilters(e),o[e.FilterQueryStringName]=s.concatFilters(h)):(f&&f.isChecked===!1?s.uncheckCategoryFilters(l.CategoryFilter,f):s.setCategoryFilters(l.CategoryFilter,f.Name),c=s.getCheckedCampaigns(l.CategoryFilter),o[r]=s.concatFilters(c));n.countFiltersInUse=s.getFiltersInUseTotalCount(l.Filters);l.CategoryFilter&&(n.countFiltersInUse+=l.CategoryFilter.countInUse);t.$broadcast(u.numFiltersInUseChangedBroadcast,n.countFiltersInUse);o.page=null;a=0;ContentFinder2.stateChangeFromControllerStarted=!0;i.go(".",o,{location:"true"})};l.searchTermsUpdated=function(n){ContentFinder2.stateChangeFromControllerStarted=!0;v=n;a=0;var t={search:n,page:null};(!v||v=="")&&d&&(y="",d=!1);i.go(".",t,{location:"true"})};n.clearFiltersClicked=function(){ii()};this.uiOnParamsChanged=function(n){if(ContentFinder2.stateChangeFromControllerStarted){ContentFinder2.stateChangeFromControllerStarted=!1;n.search&&(v=n.search);n.sort&&(y=n.sort,d=!1);var t=!1;b(it,w,p,a,s.getAllCheckedFilters(l.Filters),s.getCheckedCampaigns(l.CategoryFilter),v,y,!1);k.FacetedFilterTrimEnabled&&k.DynamicFacetedFilterTrimEnabled&&a===0?(b(rt,w,p,a,s.getAllCheckedFilters(l.Filters),s.getCheckedCampaigns(l.CategoryFilter),v,y,!0),t=!0):k.FacetedFilterTrimEnabled&&(at||(at=!0,b(rt,w,p,a,[],[],"",y,!0)));!t&&k.DynamicFilterTrimLanguagesEnabled&&b(yt,w,p,a,s.getAllCheckedFilters(l.Filters),s.getCheckedCampaigns(l.CategoryFilter),v,y,!0)}else i.reload()};l.mobileShowFilters=function(){n.mobileFiltersToggle();$(".content-finder2-section-x .search-gallery-row-x").addClass("show-search-gallery");$(".content-finder2-section-x .cf-result-col-x .results-x .mobile-filter-cta-x").addClass("show-search-gallery");$(".content-finder2-section-x .cf-result-col-x .results-x .right-action-panel").addClass("show-search-gallery");$(".content-finder2-section-x .filter-results-col-x").addClass("show-filters");setTimeout(function(){$(".mobile-view-results-cta").focus()})};l.mobileViewResultsFilters=function(){n.mobileFiltersToggle();$(".content-finder2-section-x .search-gallery-row-x").removeClass("show-search-gallery");$(".content-finder2-section-x .cf-result-col-x .results-x .mobile-filter-cta-x").removeClass("show-search-gallery");$(".content-finder2-section-x .cf-result-col-x .results-x .right-action-panel").removeClass("show-search-gallery");$(".content-finder2-section-x .filter-results-col-x").removeClass("show-filters");setTimeout(function(){$(".results-x .mobile-filter-cta-x").focus()})}}var n=angular.module("contentFinder2App"),i={transclude:!0,bindings:{currentLocale:"<"},templateUrl:"/javascript/AssetLibrary2/v2/ContentFinder2v2/Filters/ContentFinder2v2.Filters.html",controllerAs:"vm",controller:["$scope","$rootScope","$state","$stateParams","notificationService","trackService","assetService","galleryService","filterService","assetLib2Service","gallerySelectorService",t]};return n.component("contentFinder2",i),n.controller("ContentFinder2Cntlr",t),n}(),function(){"use strict";function t(n,t,i,r,u,f,e,o,s,h){function nt(t){n.FilterHeader=t.FilterHeader;w=t.PagingSummaryDisplayFormat;y=t.AssetsPerPage;b=t.DownloadLinkDisplayText;k=t.ExternalLinkDisplayText;d=t.BulkDownloadEnabled&&t.AllowBulkDownload;g=t.Sort.ChildAssetsSortOrder==null?null:t.Sort.ChildAssetsSortOrder.QueryStringText;n.PagingSummaryDisplayFormat=w;n.AssetsPerPage=y;n.ResultsHeader=it;u.galleryConfig.push({PagedGallery:t});u.viewToggleConfig.push({PagedGallery:t});o.queryPagedAssets(tt,v,a,c,l,g)}function tt(i){t.$broadcast(u.resultsBroadcast,i);var r=[];i?(i.AssetCards?(r=h.buildContentCard2(i.AssetCards,b,k,d),n.pagedItems=r):n.pagedItems=[],n.HitCount=i.HitCount?i.HitCount:0):(n.pagedItems=[],n.HitCount=0);n.PagingSummary=h.parsePagingSummary(n.PagingSummaryDisplayFormat,c,y,n.HitCount);$(".pagingSummary").html(n.PagingSummary);p=r&&r.length>0}var c=h.getPageZeroBased(r),y=0,p=!1,it=null,w=null,b=null,k=null,d=!1,g=null,rt=function(){return"/javascript/assetlibrary2/contentfinder2/PagedGallery/PagingSummary.html"},l,a,v;n.assetCardPartial="/javascript/assetlibrary2/v2/views/OneCardv2.html";n.pagingSummaryPartial=rt();n.HitCount=0;l="";r.search&&(l=r.search);AssetLibrary2.OneCard.monitorEllipsis();a=e.getLocale();v=$("#galleryId").data("galleryid");s.getPagedGallery(nt,a,v);n.$on(u.currentPageChangedBroadcast,function(n,t){c=t;s.getPagedGallery(nt,a,v)});n.$on(u.clearAllFiltersBroadcast,function(){});n.assetsLoaded=function(){return p};this.searchtext="";n.searchTermsUpdated=function(){i.go(".",{search:this.searchtext},{location:"true"})};this.uiOnParamsChanged=function(n){l=n.search||"";c=h.getPageZeroBased(n);o.queryPagedAssets(tt,v,a,c,l)}}var n=angular.module("pagedGallerySource",[]),i={bindings:{query:"<"},template:"",controller:["$scope","$rootScope","$state","$stateParams","notificationService","trackService","localeService","assetService","galleryService","assetLib2Service",t]};return n.component("contentFinder2FiltersDetail",i),n.controller("ContentFinder2DetailCntlr",t),n}(),function(){"use strict";function t(){var n=this}var n=angular.module("contentFinder2App"),i={bindings:{catfilter:"<"},require:{parent:"^contentFinder2"},templateUrl:"/javascript/AssetLibrary2/v2/ContentFinder2v2/Filters/CategoryFilter/ContentFinder2v2.CategoryFilter.html",controllerAs:"vm",controller:[t]};return n.component("categoryFilter",i),n.controller("contentFinder2CategoryFilterCntlr",t),n}(),function(){"use strict";function t(n){var t=this;t.Id="";t.DisplayName="";t.Name="";t.isEnabled=!0;t.$onInit=function(){t.Id=t.elementId;t.DisplayName=t.filter.DisplayName;t.Name=t.filter.Name;t.filter.isEnabled==!1&&(t.isEnabled=t.filter.isEnabled)};t.filterClicked=function(i,r){i===13&&(r.preventDefault(),t.filter.isChecked=t.filter.isChecked==!0?!1:!0);t.parentFilterItem.checkmarkclicked(t.filter.isChecked);t.parent.filterClicked(t.parentFilterItem.filterQueryStringName,t.filter,t.parentFilterItem.model);n.trackFilter(t.parentFilterItem.filterHeader,t.DisplayName,t.Id)};t.onMousedown=function(){n.trackFilter(t.parentFilterItem.filterHeader,t.DisplayName,t.Id)}}var n=angular.module("contentFinder2App"),i={bindings:{filter:"<",elementId:"<"},require:{parent:"^contentFinder2",parentFilterItem:"^filterItem"},templateUrl:"/javascript/AssetLibrary2/v2/ContentFinder2v2/Filters/CheckboxFilter/ContentFinder2v2.CheckboxFilter.html",controllerAs:"vm",controller:["trackService",t]};return n.component("checkboxFilter",i),n.controller("ContentFinder2CheckboxFilterCntlr",t),n}(),function(){"use strict";function t(n){var t=this;t.isExpanded=!1;t.$onInit=function(){t.isExpanded=t.model.Expanded};t.checkmarkclicked=function(n){n?t.model.countInUse++:t.model.countInUse--};t.expand=function(){t.isExpanded=!0};t.collapse=function(){t.isExpanded=!1};t.toggle=function(){t.isExpanded=!t.isExpanded;n.saveExpandedToggle(t.index,t.isExpanded)};$(document).ready(function(){setTimeout(function(){for(var t,n=0;n<5;n++)t=$(".filter-list.filter-parent-item-"+n),t.hasClass("expanded")?$(".filter-list.filter-parent-item-"+n+" > li > a").attr("aria-expanded","true"):$(".filter-list.filter-parent-item-"+n+" > li > a").attr("aria-expanded","false")},5e3)});t.changeClass=function(n){var t=$(".filter-list.filter-parent-item-"+n);t.hasClass("expanded")?t.removeClass("expanded"):t.addClass("expanded");t.hasClass("expanded")?$(".filter-list.filter-parent-item-"+n+" > li > a").attr("aria-expanded","true"):$(".filter-list.filter-parent-item-"+n+" > li > a").attr("aria-expanded","false")}}var n=angular.module("contentFinder2App"),i={bindings:{model:"<",filterHeader:"<",filterQueryStringName:"<",filters:"<",isEnabled:"<",isLastRowItem:"<",index:"<"},require:{parent:"^contentFinder2"},transclude:!0,templateUrl:"/javascript/AssetLibrary2/v2/ContentFinder2v2/Filters/FilterList/ContentFinder2v2.FilterItem.html",controllerAs:"vm",controller:["filterService",t]};return n.component("filterItem",i),n.controller("ContentFinder2FilterItemCntlr",t),n}(),function(){"use strict";function t(n,t){var i=this;i.$onInit=function(){};n.$on(t.resultsBroadcast,function(n,t){var i=$(".sort-gallery-row-x");t.HitCount>0?i.show():i.hide()})}var n=angular.module("contentFinder2App"),i={bindings:{filters:"<"},templateUrl:"/javascript/AssetLibrary2/v2/ContentFinder2v2/Filters/FilterList/ContentFinder2v2.FilterList.html",controllerAs:"vm",controller:["$scope","notificationService",t]};return n.component("filterList",i),n.controller("ContentFinder2FilterListCntlr",t),n}(),function(){"use strict";function t(n,t){var i=this;i.DimensionsTitle="Dimensions";i.widthTitle="Width (px)";i.heightTitle="Height (px)";var r=t.StartMinWidth,u=t.StartMaxWidth,f=t.StartMinHeight,e=t.StartMaxHeight;i.slideChangeListener=function(){t.$broadcast("dimensionsChanged",{widthMin:i.bootstrapSlider.widthMin,widthMax:i.bootstrapSlider.widthMax,heightMin:i.bootstrapSlider.heightMin,heightMax:i.bootstrapSlider.heightMax})};i.bootstrapSlider={widthMin:r,widthMax:u,widthOptions:{step:10,hideLimitLabels:!0,hidePointerLabels:!0,onEnd:i.slideChangeListener},heightMin:f,heightMax:e,heightOptions:{step:10,hideLimitLabels:!0,hidePointerLabels:!0,onEnd:i.slideChangeListener}};i.expand=function(){i.refreshSlider();var n=angular.element(document.querySelector("#dimension-slider-list"));n.hasClass("expanded")?n.removeClass("expanded"):n.addClass("expanded")};i.refreshSlider=function(){t.$$postDigest(function(){t.$broadcast("rzSliderForceRender")})}}var n=angular.module("contentFinder2App"),i={require:{parent:"^contentFinder2"},templateUrl:"/javascript/AssetLibrary2/v2/ContentFinder2v2/Filters/DimensionFilter/ContentFinder2v2.DimensionFilter.html",controllerAs:"vm",controller:["$scope","$rootScope",t]};return n.component("dimensionFilter",i),n.controller("contentFinder2DimensionFilterCntlr",t),n}(),function(){"use strict";function t(n,t,i,r,u,f){function h(t){n.showActiveFilters=t.ShowActiveFilters;n.activeFiltersTitle=t.ActiveFiltersTitle;n.clearFiltersText=t.ClearFilterLink;n.clearFiltersTooltip=t.ClearFilterLink}var e=this,o,s;e.filters={};o=f.getLocale();s=$("#galleryId").data("galleryid");i.getGallery(h,o,s);e.$onInit=function(){e.reset()};e.activeFilterClicked=function(n){var i,t,r,u,f;if(this.parent.Filters&&this.parent.Filters.length)for(i=0;i<this.parent.Filters.length;i++)for(t=this.parent.Filters[i],r=0;r<t.Filters.length;r++)if(u=t.Filters[r],u.Id==n.Id){u.isChecked=!1;f=t.FilterQueryStringName;this.parent.filterClicked(f,u,t);t.countInUse--;break}};e.getFilterHeader=function(n){var u="",t,i,r,f;if(this.parent.Filters&&this.parent.Filters.length)for(t=0;t<this.parent.Filters.length;t++)for(i=this.parent.Filters[t],r=0;r<i.Filters.length;r++)if(f=i.Filters[r],f.Id==n.Id){u=i.FilterHeader;break}return u};e.reset=function(){this.parent.Filters&&this.parent.Filters.length&&(e.filters=r.getAllCheckedFilters(this.parent.Filters))};n.$on(u.numFiltersInUseChangedBroadcast,function(){e.reset()});n.clearFiltersClicked=function(){t.$broadcast(u.clearAllFiltersBroadcast,0)};n.hasFilters=function(){for(var t,n=0;n<e.filters.length;n++)for(t=0;t<e.filters[n].length;t++)return!0;return!1}}var n=angular.module("contentFinder2App"),i={require:{parent:"^contentFinder2"},templateUrl:"/javascript/AssetLibrary2/v2/ContentFinder2v2/Filters/ActiveFilters/ContentFinder2v2.ActiveFilters.html",controllerAs:"vm",controller:["$scope","$rootScope","galleryService","filterService","notificationService","localeService",t]};return n.component("activeFilters",i),n.controller("ContentFinder2ActiveFiltersCntlr",t),n}(),function(){"use strict";function n(n){function i(i,r){var u="/api/v2/assetlib2/finder/gallerySelectorEnabled?locale="+r+"&contextItemId="+gmositecore._contextItemId+"&isPreview="+gmositecore._isPreview;t&&i(t);n.get(u).then(function(n){t=n.data;i(t)})}function r(i,r){var u="/api/v2/assetlib2/finder/gallerySelectors?locale="+r+"&contextItemId="+gmositecore._contextItemId+"&isPreview="+gmositecore._isPreview;t&&i(t);n.get(u).then(function(n){t=n.data;i(t)})}var t=null;return{getEnabled:i,getGallerySelectors:r}}angular.module("contentFinder2App").service("gallerySelectorService",n);n.$inject=["$http"]}(),function(){"use strict";function t(n,t){var i=this;i.galleryOptions=[];i.isEnabled=!1;i.displayText="";i.locale="";i.galleryOptionsFirstItemClass=!0;i.$onInit=function(){i.locale=n.getLocale();t.getEnabled(i.getEnabled,i.locale)};i.getEnabled=function(n){i.isEnabled=n;i.isEnabled&&t.getGallerySelectors(i.populateGallerySelector,i.locale)};i.populateGallerySelector=function(n){var r,t;if(n&&(i.displayText=n.SelectorDisplayText,n.GallerySelectors)){for(i.galleryOptions=n.GallerySelectors,r=window.location.href.toLowerCase(),t=0;t<n.GallerySelectors.length;t++)n.GallerySelectors[t].GalleryLink&&r.indexOf(n.GallerySelectors[t].GalleryLink.toLowerCase())>=0&&(i.galleryOptionSelected=n.GallerySelectors[t]);n.GallerySelectors[0].GalleryName==i.galleryOptionSelected.GalleryName&&(i.galleryOptionsFirstItemClass=!1)}};i.gallerySelectorUpdated=function(n){n&&i.galleryOptionSelected!==n&&(i.galleryOptionSelected=n,window.location.href=n.GalleryLink)}}var n=angular.module("contentFinder2App"),i={templateUrl:"/javascript/AssetLibrary2/v2/ContentFinder2v2/GallerySelector/ContentFinder2v2.GallerySelector.html",controllerAs:"vm",controller:["localeService","gallerySelectorService",t]};return n.component("gallerySelector",i),n.controller("gallerySelectorCntlr",t),n}(),function(){"use strict";function n(){return{}}angular.module("contentFinder2App").service("sortFilterService",n);n.$inject=["$http","$q"]}(),function(){"use strict";function t(n,t,i,r,u,f,e){var o=this,s,h;o.sortOptionsFirstItemClass=!0;o.isSortEnabled=!1;s=e.getLocale();h=$("#galleryId").data("galleryid");o.populateSortFilter=function(n){var t=n.PagedGallery.Sort,i,u,f;if(t&&(i=r.sort,o.sortFilterOptions=t.Selectors,o.isSortEnabled=t.Enabled,o.sortFilterDisplayText=t.DisplayText,o.isSortEnabled&&(i||(o.sortFilterOptionSelected=o.sortFilterOptions[0]),i)))for(u=0;u<o.sortFilterOptions.length;u++)if(f=o.sortFilterOptions[u],f.QueryStringText===i){o.sortFilterOptionSelected=f;break}};n.$on(u.resultsBroadcast,function(){var u=r.search,i=r.sort,t,n;if(u&&!i)n=o.getDefaultSearchSortSelector(),n&&(o.sortFilterOptionSelected=n);else if(i){if(o.sortFilterOptions&&o.sortFilterOptions.length)for(t=0;t<o.sortFilterOptions.length;t++)if(n=o.sortFilterOptions[t],n.QueryStringText===i){o.sortFilterOptionSelected=n;break}}else o.sortFilterOptions&&o.sortFilterOptions[0]&&(o.sortFilterOptionSelected=o.sortFilterOptions[0])});o.sortFilterUpdated=function(n){o.sortFilterOptionSelected!==n&&(o.sortFilterOptionSelected=n,ContentFinder2.stateChangeFromControllerStarted=!0,i.go(".",{sort:n.QueryStringText,page:null}),t.$broadcast(u.currentPageChangedBroadcast,0))};o.getDefaultSearchSortSelector=function(){var n,t,i;if(o.sortFilterOptions&&o.sortFilterOptions.length)for(n=0;n<o.sortFilterOptions.length;n++)if(t=o.sortFilterOptions[n],t.IsDefaultSearchSortOrder)return t;return i=o.getRelevanceSortSelector(),i?i:void 0};o.getRelevanceSortSelector=function(){var n,t;if(o.sortFilterOptions&&o.sortFilterOptions.length)for(n=0;n<o.sortFilterOptions.length;n++)if(t=o.sortFilterOptions[n],t.QueryStringText&&t.QueryStringText.indexOf("Relevance")>-1)return t};n.$on(u.galleryConfigBroadcast,function(n,t){o.populateSortFilter(t)})}var n=angular.module("contentFinder2App"),i={templateUrl:"/javascript/AssetLibrary2/v2/ContentFinder2v2/SortFilter/ContentFinder2v2.SortFilter.html",controllerAs:"vm",controller:["$scope","$rootScope","$state","$stateParams","notificationService","galleryService","localeService",t]};return n.component("sortFilter",i),n.controller("sortFilterCntlr",t),n}(),function(){"use strict";function t(n,t,i,r,u,f,e){var o=this,s,h;o.selectedTitleClass=!0;o.enabled=!1;s=e.getLocale();h=$("#galleryId").data("galleryid");o.populatePageSizeSelector=function(n){o.current=n.PagedGallery.AssetsPerPage;o.sizes=n.PagedGallery.AssetsPerPageOptions;o.enabled=o.sizes.length>1;o.displayText=n.PagedGallery.PageSizeText;o.cookieName=n.PagedGallery.AssetsPerPageCookieName};o.updated=function(n){$.cookie(o.cookieName,n,{expires:9999,path:"/"});t.$broadcast(u.currentPageChangedBroadcast,0);setTimeout(function(){window.location.reload()},100)};n.$on(u.galleryConfigBroadcast,function(n,t){o.populatePageSizeSelector(t)})}var n=angular.module("contentFinder2App"),i={templateUrl:"/javascript/AssetLibrary2/v2/ContentFinder2v2/PageSizeSelector/ContentFinder2v2.PageSizeSelector.html",controllerAs:"vm",controller:["$scope","$rootScope","$state","$stateParams","notificationService","galleryService","localeService",t]};return n.component("pageSizeSelector",i),n.controller("pageSizeSelectorCntlr",t),n}(),function(){"use strict";function n(n,t,i,r,u,f,e,o){var s=this;s.isEnabled=!1;s.isThumbView=!0;s.$onInit=function(){var n=u.getLocale();f.getViewToggleEnabled(s.getEnabled,n)};s.getEnabled=function(n){if(s.isButtonEnabled=n.IsEnabled,s.isButtonEnabled)for(var i=0;i<n.Views.length;i++)n.Views[i].ViewType.indexOf("List")>=0?(s.listIconText=n.Views[i].DisplayText,s.listView=n.Views[i]):(s.gridIconText=n.Views[i].DisplayText,s.gridView=n.Views[i]);s.isEnabled=s.isViewEnabled&&s.isButtonEnabled;s.isEnabled&&t.$broadcast(e.galleryViewSwitchBroadcast,s.isThumbView)};n.$on(e.galleryConfigBroadcast,function(n,t){s.populateViewData(t)});n.$watch(function(){return e.viewToggleConfig},function(n){angular.forEach(n,function(n){s.populateViewData(n)});o(function(){e.viewToggleConfig=[]})},!0);s.populateViewData=function(n){s.galleryName=n.PagedGallery.GalleryName;var t=n.PagedGallery.DefaultView;s.CreateView(t)};s.CreateView=function(n){n!=null?(s.isViewEnabled=!0,n.ViewType.indexOf("List")>=0?(s.listIconText=n.DisplayText,s.listView=n,s.isThumbView=!1):(s.gridIconText=n.DisplayText,s.gridView=n,s.isThumbView=!0)):s.isViewEnabled=!1;s.isEnabled=s.isViewEnabled&&s.isButtonEnabled;s.isEnabled&&t.$broadcast(e.galleryViewSwitchBroadcast,s.isThumbView)};s.toggleView=function(n){s.isThumbView=n;t.$broadcast(e.galleryViewSwitchBroadcast,n);var i=u.getLocale();n?f.setGalleryView(s.toggleGalleryView,i,s.galleryName,s.gridView.QueryStringText):f.setGalleryView(s.toggleGalleryView,i,s.galleryName,s.listView.QueryStringText)};s.toggleGalleryView=function(n){n==""}}var i=angular.module("pagedGalleryViewToggle",[]),t={templateUrl:"/javascript/AssetLibrary2/v2/ContentFinder2v2/ViewToggle/ContentFinder2v2.ViewToggle.html",controllerAs:"vm",controller:["$scope","$rootScope","$state","$stateParams","localeService","galleryService","notificationService","$timeout",n]};ContentFinder2.component("viewToggle",t);ContentFinder2.controller("viewToggleCntlr",n)}(),function(){"use strict";function t(n,t,r,u,f,e,o,s,h,c,l,a,v){function b(t){for(var r=[],i=0;i<t.data.length;i++)t.data[i].IconTypeString==="Download"&&(r.push(t.data[i]),n.bulkDownloadAssetNumber++,n.isAllAssetsNonDownload=!1);r.length!=0&&n.AllDownloabableAssets.push({page:t.page,assets:r});n.showBulkDownload=!n.showBulkDownloadSignin&&!n.isAllAssetsNonDownload}function nt(t){for(var r,u,i=0;i<t.length;i++)r=t[i],r.m_Item2.indexOf("Asset")>=0&&n.favoriteAssets.push(r.m_Item1);if(n.assets!=null&&n.assets.length>0)for(i=0;i<n.assets.length;i++)u=n.assets[i],u.IsFavorite=k(u.ItemId)}function tt(){}function k(t){for(var i=0;i<n.favoriteAssets.length;i++)if(n.favoriteAssets[i].indexOf(t)!=-1)return!0;return!1}function it(n){return n>=1073741824?(n/1073741824).toFixed(2)+" GB":n>=1048576?(n/1048576).toFixed(2)+" MB":n>=1024?(n/1024).toFixed(2)+" KB":n>1?n+" bytes":n==1?n+" byte":"0 byte"}function d(n,t,i,r,u,f,e){var o="";o+='                <div id="onecardpreview" class="modal" tabindex="-1" role="dialog" aria-hidden="true">';o+='                    <div class="modal-dialog" role="document">';o+='                        <div class="modal-content">';o+='                            <div class="modal-header">';o+='                                <h5 class="modal-title w-90">';r.length>0&&(o+='                                    <span class="title-lable">'+r+"<\/span>");o+='                                    <span class="title-text">'+i+"<\/span>";o+="                                <\/h5>";o+='                                <button type="button" class="close" data-dismiss="modal" aria-label="'+f+'" title="'+f+'">';o+="                                    <span>×<\/span>";o+="                                <\/button>";t.length>0&&(o+='                                <button type="button" class="details" aria-label="'+e+'" title="'+e+'">',o+='                                    <span class="icon icon-download"><\/span>',o+="                                <\/button>");o+="                            <\/div>";o+='                            <div class="modal-body">';o+='                                <img src="'+n+'" alt="'+u+'" title="'+u+'" />';o+="                            <\/div>";o+="                        <\/div>";o+="                    <\/div>";o+="                <\/div>";$("#onecardpreview").remove();$("#mainform").append(o);$("#onecardpreview .details").click(function(){window.location.href=t})}var g=this,y,p,w;g.$onInit=function(){};n.assetCardPartial="/javascript/assetlibrary2/v2/views/OneCardv2.html";n.assetDirectoryPartial="/javascript/assetlibrary2/v2/views/ListViewV2.html";n.HitCount=0;n.AssetsPerPage=0;n.CurrentPage=l.getPageZeroBased(u)+1;n.GalleryConfigLoaded=!1;n.AssetsLoaded=!1;n.MaxSize=3;n.showResults=!0;n.filtersAreInUse=!1;n.pageWasChanged=!1;n.selectedDownLoadAssets=[];n.bulkDownloadAssetNumber=0;n.downloadallFileSize=0;n.favoriteAssets=[];n.isThumbView=!0;n.AllDownloabableAssets=[];n.showBulkDownload=!1;n.showBulkDownloadSignin=!1;n.enablePreview=!1;n.previewTitleLabelText="";n.previewImageAlt="";n.previewCloseAlt="";n.previewDetailsAlt="";n.$watch(function(){return f.galleryConfig},function(t){angular.forEach(t,function(t){n.loadGalleryConfig(t);n.AssetsLoaded&&n.markAssets()});v(function(){f.galleryConfig=[]})},!0);n.loadGalleryConfig=function(i){i.PagedGallery&&(n.AssetsPerPage=i.PagedGallery.AssetsPerPage,n.ResultsHeader=i.PagedGallery.ResultsHeader,n.GalleryHeader=i.PagedGallery.GalleryHeader,n.PagingSummaryDisplayFormat=i.PagedGallery.PagingSummaryDisplayFormat,n.PagePrevious=i.PagedGallery.PagePreviousText,n.PageNext=i.PagedGallery.PageNextText,n.DownloadLinkDisplayText=i.PagedGallery.DownloadLinkDisplayText,n.ExternalLinkDisplayText=i.PagedGallery.ExternalLinkDisplayText,n.NoResultsDisplayText=i.PagedGallery.NoResultsDisplayText,n.SearchingDisplayText=i.PagedGallery.SearchingDisplayText,n.NoResultsClearFiltersText=i.PagedGallery.NoResultsClearFiltersText,n.NoResultsClearFiltersLink=i.PagedGallery.NoResultsClearFiltersLink,n.bulkDownloadEnabled=i.PagedGallery.BulkDownloadEnabled,n.allowBulkDownload=i.PagedGallery.AllowBulkDownload,n.bulkDownloadEndPoint=i.PagedGallery.BulkDownloadEndPoint,n.bulkDownloadFileName=i.PagedGallery.BulkDownloadFileName,n.bulkDownloadSelectAllText=i.PagedGallery.BulkDownloadSelectAllText,n.bulkDownloadText=i.PagedGallery.BulkDownloadText,n.bulkDownloadSigninText=i.PagedGallery.BulkDownloadSigninText,n.bulkDownloadSelectAllByPage=i.PagedGallery.EnableDownloadByPage,n.authentication=i.PagedGallery.Authentication,n.favoritesEnabled=i.PagedGallery.FavoritesEnabled,n.showQueryScore=i.PagedGallery.ShowQueryScore,n.enablePreview=i.PagedGallery.EnablePreview,n.previewTitleLabelText=i.PagedGallery.PreviewTitleLabelText,n.previewImageAlt=i.PagedGallery.PreviewImageAlt,n.previewCloseAlt=i.PagedGallery.PreviewCloseAlt,n.previewDetailsAlt=i.PagedGallery.PreviewDetailsAlt,n.adalresource=i.PagedGallery.Resource,n.FavoritesAPIEndpoint=i.PagedGallery.FavoritesAPIEndpoint,n.Tenant=i.PagedGallery.Tenant,(n.Tenant===undefined||n.Tenant!=undefined&&n.Tenant.length==0)&&(n.Tenant=location.hostname),t.paddingStyleAttributes=i.PagedGallery.paddingStyleAttributes,n.favoritesEnabled&&s.getAllFavorites(nt,tt,n.adalresource,n.FavoritesAPIEndpoint,n.Tenant),n.GalleryConfigLoaded=!0)};n.$on(f.resultsBroadcast,function(t,i){n.AssetsLoaded=!0;n.pageWasChanged=!1;n.assets=i.AssetCards;n.HitCount=i.HitCount;n.GalleryConfigLoaded&&n.markAssets()});n.markAssets=function(){var t,i;if(c.$$search&&(n.CurrentPage=l.getPageZeroBased(c.$$search)+1),n.favoritesEnabled)for(t=0;t<n.assets.length;t++)i=n.assets[t],i.IsFavorite=k(i.ItemId);n.bulkDownloadEnabled&&n.bulkDownloadSelectAllByPage?(p(),b({page:n.CurrentPage-1,data:n.assets})):n.AllDownloabableAssets.length<=0&&n.bulkDownloadEnabled&&w()};n.$on(f.showResultsBroadcast,function(t,r){n.showResults=r;i=n.showResults});n.$on(f.numFiltersInUseChangedBroadcast,function(t,i){n.filtersAreInUse=i>0;n.pageWasChanged||(n.AssetsLoaded=!1)});n.$on(f.galleryViewSwitchBroadcast,function(t,i){n.isThumbView=i});n.tagCards=function(){e.tagGalleryResults()};n.hidePager=function(){return y()<2||!n.AssetsLoaded};n.lastPage=function(){return n.CurrentPage===y()-1?!0:!1};n.selectAll=!1;n.pageChanged=function(){var u=n.CurrentPage==1&&r.params.page==undefined,e=n.CurrentPage!=r.params.page,o,i;e&&!u&&(n.pageWasChanged=!0,$(".js-asset-card-ellipsis").addClass("card-ellipsis-hidden"),o="Page changed to: "+n.CurrentPage,i=n.CurrentPage,i==1&&(i=null),ContentFinder2.stateChangeFromControllerStarted=!0,r.go(".",{page:i},{notify:!1}),t.$broadcast(f.currentPageChangedBroadcast,n.CurrentPage-1))};y=function(){return Math.ceil(n.HitCount/n.AssetsPerPage)};n.clearAllFilters=function(){n.AssetsLoaded=!1;p();t.$broadcast(f.clearAllFiltersBroadcast,n.CurrentPage)};n.downloadall=function(){n.pgDownloadall=" ("+it(n.downloadallFileSize)+")"};n.assetcardSelectionChange=function(t){var i=n.selectedDownLoadAssets.indexOf(t);i<0?(n.selectedDownLoadAssets.push(t),n.selectAll||n.selectedDownLoadAssets.length!=n.bulkDownloadAssetNumber||($("#SelectAllAsset").prop("checked",!0),n.selectAll=!n.selectAll)):(n.selectedDownLoadAssets.splice(i,1),n.selectAll&&(n.selectAll=!n.selectAll,$("#SelectAllAsset").prop("checked",!1)));n.selectAssets()};p=function(){n.AllDownloabableAssets.length>0&&n.AllDownloabableAssets.splice(0,n.AllDownloabableAssets.length);n.bulkDownloadAssetNumber=0;n.downloadallFileSize=0;n.downloadall();n.selectedDownLoadAssets.length>0&&n.selectedDownLoadAssets.splice(0,n.selectedDownLoadAssets.length);n.selectAll&&(n.selectAll=!n.selectAll,$("#SelectAllAsset").prop("checked",!1))};w=function(){for(var i=o.getLocale(),r=$("#galleryId").data("galleryid"),u=Math.ceil(n.HitCount/n.AssetsPerPage),t=0;t<u;t++)s.queryPagedDownloadAssets(b,r,i,t,"","")};n.isAllAssetsNonDownload=!0;n.toggleAllSelection=function(){n.selectAll=!n.selectAll;n.selectAll||n.selectedDownLoadAssets.splice(0,n.selectedDownLoadAssets.length);n.selectAssets()};n.selectAssets=function(){var u,t,i,r;if(n.downloadallFileSize=0,n.selectAll){for(t=0;t<n.AllDownloabableAssets.length;t++)for(i=0;i<n.AllDownloabableAssets[t].assets.length;i++)n.AllDownloabableAssets[t].assets[i].IconTypeString==="Download"&&(n.downloadallFileSize+=n.AllDownloabableAssets[t].assets[i].FileSize,r=n.selectedDownLoadAssets.indexOf(n.AllDownloabableAssets[t].assets[i].ItemId),r<0&&n.selectedDownLoadAssets.push(n.AllDownloabableAssets[t].assets[i].ItemId));n.downloadall()}else{for(t=0;t<n.AllDownloabableAssets.length;t++)for(i=0;i<n.AllDownloabableAssets[t].assets.length;i++)n.AllDownloabableAssets[t].assets[i].IconTypeString==="Download"&&(r=n.selectedDownLoadAssets.indexOf(n.AllDownloabableAssets[t].assets[i].ItemId),r>=0&&(n.downloadallFileSize+=n.AllDownloabableAssets[t].assets[i].FileSize));n.downloadall()}for(u=!1,t=0;t<n.AllDownloabableAssets.length;t++)for(i=0;i<n.AllDownloabableAssets[t].assets.length;i++)if(n.AllDownloabableAssets[t].assets[i].IconTypeString==="Download"&&(r=n.selectedDownLoadAssets.indexOf(n.AllDownloabableAssets[t].assets[i].ItemId),r>=0&&n.AllDownloabableAssets[t].assets[i].IsLocked)){u=!0;break}n.showBulkDownloadSignin=n.bulkDownloadEnabled&&!n.allowBulkDownload&&u&&!n.isAllAssetsNonDownload;n.showBulkDownload=!n.showBulkDownloadSignin&&!n.isAllAssetsNonDownload&&n.bulkDownloadEnabled};n.bulkDownload=function(){n.bulkDownloadEnabled&&n.selectedDownLoadAssets.length>0&&s.queryAssetsById(n.doBulkDownload,o.getLocale(),n.selectedDownLoadAssets)};n.doBulkDownload=function(t){var i={},r,u;if(i.download_filename=n.bulkDownloadFileName,i.assets=[],n.bulkDownloadEndPoint.length>0){for(r=0;r<t.length;r++)i.assets.push(t[r].AssetBulkDownloadUrl);i.assets&&i.assets.length>0&&(u=JSON.stringify(i),s.doBulkDownload(n.bulkDownloadStatus,n.bulkDownloadEndPoint,u))}};n.bulkDownloadStatus=function(){};n.panelOverlay=function(n){var f=n.currentTarget,t=f.querySelector(".clickable-panel-header-hover a"),a=t.getAttribute("data-itemid"),y=t.getAttribute("data-pageevent"),p=t.getAttribute("data-trackingname"),u=t.getAttribute("href"),o=t.getAttribute("ms.pgarea"),s=t.getAttribute("ms.interactiontype"),r=t.getAttribute("ms.title"),h=t.getAttribute("ms.cmpgrp"),c=t.getAttribute("ms.cmpnm"),l=t.getAttribute("ms.cmptyp"),i=$(n.target);i.hasClass("media-hoverable-target")?r="image":i.hasClass("icon-preview")?(d(i.data("previewurl"),u,$(t).text(),i.data("previewtitlelabeltext"),i.data("previewimagealt"),i.data("previewclosealt"),i.data("previewdetailsalt")),$("#onecardpreview").modal("show")):r=r;i.hasClass("headline-hoverable-target")||i.hasClass("clickable-panel-non-hoverable-target")||i.hasClass("mscc-checkbox")||i.hasClass("clickable-panel-label")||i.hasClass("gallery-check")||u!=null&&u.length>0&&v(function(){e.trackOneCard(o,s,r,h,c,l);t.click()})};n.panelPreview=function(n){var i=$(n.currentTarget).prev(),r=i.find(".list-item-link-x a .link-text-x"),u=i.find(".list-item-link-x a").attr("href"),t=$(n.target);t.hasClass("icon-preview")&&(d(t.data("previewurl"),u,$(r).text(),t.data("previewtitlelabeltext"),t.data("previewimagealt"),t.data("previewclosealt"),t.data("previewdetailsalt")),$("#onecardpreview").modal("show"))};n.panelHover=function(n){var t=$(n.currentTarget),r,i;t.find(".clickable-panel-header-hover").addClass("headline-hovered");t.find(".clickable-panel-header-media-x").addClass("img-hovered");r=t.find(".clickable-panel-header-hover a").attr("href");(r==null||r==" ")&&t.removeClass("clickable-panel");i=$(n.target);(i.hasClass("clickable-panel-non-hoverable-target")||i.hasClass("mscc-checkbox")||i.hasClass("clickable-panel-label"))&&(t.find(".clickable-panel-header-hover").removeClass("headline-hovered"),t.find(".clickable-panel-header-media-x").removeClass("img-hovered"))};n.panelLeave=function(n){var t=$(n.currentTarget);t.find(".clickable-panel-header-hover").removeClass("headline-hovered");t.find(".clickable-panel-header-media-x").removeClass("img-hovered")}}var n=angular.module("pagedGallery",[]),i=!0,r={bindings:{areFiltersUsed:"<"},templateUrl:"/javascript/AssetLibrary2/v2/ContentFinder2v2/PagedGallery/ContentFinder2v2.PagedGallery.html",controllerAs:"vm",controller:["$scope","$rootScope","$state","$stateParams","notificationService","trackService","localeService","assetService","galleryService","$location","assetLib2Service","$window","$timeout",t]};return n.component("pagedGallery",r),n.controller("PagedGalleryCntlr",t),n}(),function(){"use strict";function n(n,t,i){var r=this,u;r.isEnabled=!1;r.isGallerySelectorEnabled=!1;r.incrementalSerach=!1;r.placeholderText="";r.locale="";r.$onInit=function(){r.locale=n.getLocale();t.getSearchConfiguration(r.setConfiguration,r.locale);r.parent.searchText&&(r.searchtext=r.parent.searchText)};r.keypressSubmit=function(n){n.which===13&&r.submitSearch(n)};r.keypressClear=function(n){n.which===13&&r.clearSearch(n)};r.setConfiguration=function(n){r.isEnabled=n.IsEnabled;r.incrementalSearch=n.IncrementalSearch;r.enableAutoQuote=n.EnableAutoQuote;u=n.PlaceholderText;r.fillPlaceholderText(r.locale);r.enableClearSearch=!0;r.clearSearchText=n.ClearSearchdisplayText};r.searchTermsUpdated=function(){r.incrementalSearch&&r.parent.searchTermsUpdated(r.searchtext)};r.submitSearch=function(n){var t=r.searchtext,u=!0,i;(t==null||t.length==0)&&(u=!1);i=-1;r.enableAutoQuote==!0&&u==!0&&(i=t.indexOf('"')===0&&t.lastIndexOf('"')===t.length-1?0:1);i===1&&(t='"'+t+'"');r.parent.searchTermsUpdated(t);n.preventDefault()};r.clearSearch=function(){r.searchtext="";r.parent.searchTermsUpdated("")};r.fillPlaceholderText=function(n){if(r.isEnabled){var t=location.href.replace(location.hash,"");i.getGallerySelectors(function(n){if(r.isGallerySelectorEnabled=n.IsEnabled,n.IsEnabled)for(var i=0;i<n.GallerySelectors.length;i++)if(n.GallerySelectors[i].GalleryLink&&n.GallerySelectors[i].GalleryLink.toLowerCase()===t.toLowerCase()){r.placeholderText=n.GallerySelectors[i].PlaceholderText;break}r.placeholderText||(r.placeholderText=u)},n)}}}var i=angular.module("contentFinder2App"),t={require:{parent:"^contentFinder2"},templateUrl:"/javascript/AssetLibrary2/v2/ContentFinder2v2/Search/ContentFinder2v2.Search.html",controllerAs:"vm",controller:["localeService","galleryService","gallerySelectorService",n]};ContentFinder2.component("search",t);ContentFinder2.controller("searchCntlr",n)}();$(document).ready(function(){function n(){var i=document.documentElement.clientWidth,n,t;i>=900&&$(".sort-gallery-row .dropdown").removeAttr("style");i<=899&&(n=$(".sort-gallery-row .select-option-row").width(),t=n-67.14+"px",$(".sort-gallery-row .dropdown").css("max-width",t));i<=679&&(n=$(".sort-gallery-row .select-option-row").width(),t=n-60.41+"px",$(".sort-gallery-row .dropdown").css("max-width",t));i<=539&&(n=$(".sort-gallery-row .select-option-row").width(),t=n-50.41+"px",$(".sort-gallery-row .dropdown").css("max-width",t))}$("ul.gallery-view-toggle li a").click(function(){var n=$(this).attr("data-tab");$("ul.gallery-view-toggle li a").removeClass("current on").addClass("off");$(".tab-content").removeClass("current");$(this).addClass("current on").removeClass("off");$("#"+n).addClass("current")});$(function(){$("#SelectAllAsset").click(function(){$(".asset-card-row .checkbox-custom").prop("checked",this.checked)});$(".asset-card-row .checkbox-custom").click(function(){$(".asset-card-row .checkbox-custom").length==$(".asset-card-row .checkbox-custom:checked").length?$("#SelectAllAsset").prop("checked",!0):$("#SelectAllAsset").prop("checked",!1)})});$(".checkbox-custom").keypress(function(n){var t=n.which;if(t==13)return $(this).click(),!1});setTimeout(function(){$(".dropdown .dropdown-menu a").on("keydown",function(n){n.keyCode!=9||n.shiftKey||$(".dropdown .dropdown-menu a:visible").last().is($(this))&&($(this).closest(".dropdown").removeClass("open"),$(this).closest(".dropdown").find("a.cf-first-link").attr("aria-expanded",!1),$(document).trigger("click"))});$(".dropdown a.cf-first-link").on("keydown",function(n){n.keyCode==9&&n.shiftKey&&($(this).parent().removeClass("open"),$(this).attr("aria-expanded",!1),$(document).trigger("click"))})},1e3);setTimeout(function(){$(".results-pagination-link").on("click",function(){document.querySelector(".cf-result-col").scrollIntoView({behavior:"smooth"})});$(".dropdown-toggle.ac-modal-drpdwn-link").attr("aria-haspopup","false");$(".dropdown-toggle.ac-modal-drpdwn-link").attr("aria-haspopup","false")},3e3);setTimeout(function(){$(".mobile-filter-cta, .mobile-close-results-cta, .mobile-view-results-cta").on("click",function(){document.querySelector(".rtg-content-finder").scrollIntoView({behavior:"smooth"})});n()},300);$(window).resize(function(){n()})})